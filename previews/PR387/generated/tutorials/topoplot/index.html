<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Topoplot · UnfoldMakie.jl</title><meta name="title" content="Topoplot · UnfoldMakie.jl"/><meta property="og:title" content="Topoplot · UnfoldMakie.jl"/><meta property="twitter:title" content="Topoplot · UnfoldMakie.jl"/><meta name="description" content="Documentation for UnfoldMakie.jl."/><meta property="og:description" content="Documentation for UnfoldMakie.jl."/><meta property="twitter:description" content="Documentation for UnfoldMakie.jl."/><meta property="og:url" content="https://unfoldtoolbox.github.io/UnfoldMakie.jl/generated/tutorials/topoplot/"/><meta property="twitter:url" content="https://unfoldtoolbox.github.io/UnfoldMakie.jl/generated/tutorials/topoplot/"/><link rel="canonical" href="https://unfoldtoolbox.github.io/UnfoldMakie.jl/generated/tutorials/topoplot/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="UnfoldMakie.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><a class="tocitem" href="../../explanations/installation/">Installing Julia &amp; UnfoldMakie.jl</a></li><li><span class="tocitem">Tutorials</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">ERP Visualizations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../erp/">ERP plot</a></li><li><a class="tocitem" href="../butterfly/">Butterfly plot</a></li><li class="is-active"><a class="tocitem" href>Topoplot</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Setup"><span>Setup</span></a></li><li class="toplevel"><a class="tocitem" href="#Plot-Topoplots"><span>Plot Topoplots</span></a></li><li><a class="tocitem" href="#Setting-sensor-positions"><span>Setting sensor positions</span></a></li><li class="toplevel"><a class="tocitem" href="#Column-Mappings-for-Topoplots"><span>Column Mappings for Topoplots</span></a></li><li class="toplevel"><a class="tocitem" href="#Labelling"><span>Labelling</span></a></li><li class="toplevel"><a class="tocitem" href="#Highlighting-channels"><span>Highlighting channels</span></a></li><li class="toplevel"><a class="tocitem" href="#Horizontal-colorbars"><span>Horizontal colorbars</span></a></li><li class="toplevel"><a class="tocitem" href="#Advanced-markers"><span>Advanced markers</span></a></li><li class="toplevel"><a class="tocitem" href="#Configurations-of-Topoplot"><span>Configurations of Topoplot</span></a></li></ul></li><li><a class="tocitem" href="../topoplotseries/">Topoplot series</a></li><li><a class="tocitem" href="../erp_grid/">ERP grid</a></li><li><a class="tocitem" href="../erpimage/">ERP image</a></li><li><a class="tocitem" href="../channel_image/">Channel image</a></li><li><a class="tocitem" href="../parallelcoordinates/">Parallel coordinates</a></li><li><a class="tocitem" href="../circ_topo/">Circular topoplots</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Unfold-specific Visualisations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../designmatrix/">Design matrix</a></li><li><a class="tocitem" href="../splines/">Spline plot</a></li></ul></li></ul></li><li><span class="tocitem">How To</span><ul><li><a class="tocitem" href="../../how_to/complex_figures/">Include multiple figures in one</a></li><li><a class="tocitem" href="../../how_to/customize_labels/">Customize channel labels</a></li><li><a class="tocitem" href="../../how_to/hide_deco/">Hide decorations and axis spines</a></li><li><a class="tocitem" href="../../how_to/position2color/">Change colormap of butterfly plot</a></li><li><a class="tocitem" href="../../how_to/uncertain_topo/">Visualize uncertainty in topoplot series</a></li><li><a class="tocitem" href="../../how_to/positions/">Convert electrode positions from 3D to 2D</a></li></ul></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="../../explanations/plot_types/">Plot types</a></li><li><a class="tocitem" href="../../explanations/key_features/">Key features</a></li><li><a class="tocitem" href="../../explanations/code_principles/">Code principles</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../explanations/speed/">Benchmarks</a></li><li><a class="tocitem" href="../../../api/">API: Functions</a></li><li><a class="tocitem" href="../../../helper/">API: Utilities</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">ERP Visualizations</a></li><li class="is-active"><a href>Topoplot</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Topoplot</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldMakie.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldMakie.jl/blob/main/docs/literate/tutorials/topoplot.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="topo_vis"><a class="docs-heading-anchor" href="#topo_vis">Topoplot</a><a id="topo_vis-1"></a><a class="docs-heading-anchor-permalink" href="#topo_vis" title="Permalink"></a></h1><p><strong>Topoplot</strong> (aka topography plot) is a plot type for visualisation of EEG activity in a specific time stemp or time interval. It can fully represent channel and channel location dimensions using contour lines.</p><p>The topoplot is a 2D projection and interpolation of the 3D distributed sensor activity. The name stems from physical geography, but instead of height, the contour lines represent voltage levels.</p><h1 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h1><p><strong>Package loading</strong></p><pre><code class="language-julia hljs">using UnfoldMakie
using DataFrames
using CairoMakie
using TopoPlots</code></pre><p><strong>Data loading</strong></p><pre><code class="language-julia hljs">dat, positions = TopoPlots.example_data();</code></pre><p>The size of <code>data</code> is 64×400×3. This means:</p><ul><li>64 channels;</li><li>400 timepoints in range from -0.3 to 0.5 mseconds;</li><li>Estimates of 3 averaging functions. Instead of displaying the EEG data for all subjects, here we aggregate the data using (1) mean, (2) standard deviation and (3) p-value within t-tests.</li></ul><p>While <code>position</code> consist of 64 x and y coordinates of each channels on a scalp.</p><h1 id="Plot-Topoplots"><a class="docs-heading-anchor" href="#Plot-Topoplots">Plot Topoplots</a><a id="Plot-Topoplots-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Topoplots" title="Permalink"></a></h1><p>Here we select a time point in 340 msec and the mean estimate.</p><pre><code class="language-julia hljs">df = DataFrame(:estimate =&gt; dat[:, 340, 1])
plot_topoplot(
    df;
    positions = positions,
    axis = (; xlabel = &quot;Time [340 ms]&quot;),
    colorbar = (; height = 350),
)</code></pre><img src="84d90fbd.png" alt="Example block output"/><h2 id="Setting-sensor-positions"><a class="docs-heading-anchor" href="#Setting-sensor-positions">Setting sensor positions</a><a id="Setting-sensor-positions-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-sensor-positions" title="Permalink"></a></h2><p>The <code>plot_topoplot()</code> needs the sensor positions to be specified. There are several ways to do this:</p><ul><li>Specify positions directly: <code>plot_topoplot(...; positions=[...])</code></li><li>Specify the sensor labels: <code>plot_topoplot(...; labels=[...])</code></li></ul><p>To get the positions from the labels we use a <a href="https://raw.githubusercontent.com/sappelhoff/eeg_positions/main/data/Nz-T10-Iz-T9/standard_1005_2D.tsv">database</a>.</p><h1 id="Column-Mappings-for-Topoplots"><a class="docs-heading-anchor" href="#Column-Mappings-for-Topoplots">Column Mappings for Topoplots</a><a id="Column-Mappings-for-Topoplots-1"></a><a class="docs-heading-anchor-permalink" href="#Column-Mappings-for-Topoplots" title="Permalink"></a></h1><p>When using topoplots with a <code>DataFrame</code> as input, the library needs to know the names of the columns used for plotting. This is specified using the <code>mapping=(;)</code> kwargs.</p><p>While there are several default values that will be checked in order if they exist in the <code>DataFrame</code>, a custom name may need to be chosen:</p><p>Note that only one of <code>positions</code> or <code>labels</code> needs to be set to draw a topoplot. If both are set, positions takes precedence, labels can be used to label electrodes in TopoPlots.jl.</p><p>The default columns of mapping could be seen usign this code:</p><pre><code class="language-julia hljs">configs_default = UnfoldMakie.PlotConfig()
configs_default.mapping.y</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(:estimate, :yhat, :y)</code></pre><h1 id="Labelling"><a class="docs-heading-anchor" href="#Labelling">Labelling</a><a id="Labelling-1"></a><a class="docs-heading-anchor-permalink" href="#Labelling" title="Permalink"></a></h1><ul><li><code>label_text</code> draws labels next to their positions.</li></ul><p>Example: <code>plot_topoplot(...; visual=(; label_text = true))</code></p><ul><li><code>label_scatter (boolean)</code> draws the markers at the given positions.</li></ul><p>Example: <code>plot_topoplot(...; visual=(; label_scatter = true))</code></p><pre><code class="language-julia hljs">begin
    f = Figure(size = (500, 500))
    labs4 = [&quot;s1&quot;, &quot;s2&quot;, &quot;s3&quot;, &quot;s4&quot;]
    plot_topoplot!(
        f[1, 1],
        dat[1:4, 340, 1];
        positions = positions[1:4],
        visual = (; label_scatter = false),
        labels = labs4,
        axis = (; xlabel = &quot;&quot;, title = &quot;No markers&quot;),
        colorbar = (; height = 100,),
    )

    plot_topoplot!(
        f[2, 1],
        dat[1:4, 340, 1];
        positions = positions[1:4],
        visual = (;
            label_text = true,
            label_scatter = (
                markersize = 15,
                color = &quot;white&quot;,
                strokecolor = &quot;green&quot;,
                strokewidth = 2,
            ),
        ),
        labels = labs4,
        axis = (; xlabel = &quot;Time [340 ms]&quot;, title = &quot;Markers with channel labels&quot;),
        mapping = (; labels = labs4),
        colorbar = (; height = 100),
    )
    f
end</code></pre><img src="ed7e87d0.png" alt="Example block output"/><h1 id="Highlighting-channels"><a class="docs-heading-anchor" href="#Highlighting-channels">Highlighting channels</a><a id="Highlighting-channels-1"></a><a class="docs-heading-anchor-permalink" href="#Highlighting-channels" title="Permalink"></a></h1><pre><code class="language-julia hljs">plot_topoplot(dat[:, 50, 1]; positions, high_chan = [1, 2], axis = (; xlabel = &quot;Time [340 ms]&quot;))</code></pre><img src="1db228f6.png" alt="Example block output"/><h1 id="Horizontal-colorbars"><a class="docs-heading-anchor" href="#Horizontal-colorbars">Horizontal colorbars</a><a id="Horizontal-colorbars-1"></a><a class="docs-heading-anchor-permalink" href="#Horizontal-colorbars" title="Permalink"></a></h1><p>Just switch <code>colorbar.vertical</code> to <code>false</code></p><pre><code class="language-julia hljs">plot_topoplot(
    dat[:, 50, 1];
    positions,
    axis = (; xlabel = &quot;Time [50 ms]&quot;),
    colorbar = (; vertical = false, width = 180, label = &quot;Voltage estimate&quot;),
)</code></pre><img src="eeb12841.png" alt="Example block output"/><h1 id="Advanced-markers"><a class="docs-heading-anchor" href="#Advanced-markers">Advanced markers</a><a id="Advanced-markers-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-markers" title="Permalink"></a></h1><p>You can use markers and their proeprties as additional information dimension. For instance, to map uncertaitny or some other value to the marker size, color or rotation. This is done by setting the <code>topo_attributes</code> kwarg. The following example shows how to set the marker size and color based on the data values. Check more <a href="https://docs.makie.org/dev/reference/plots/scatter#markers">here</a>.</p><p>Markers as arrows</p><pre><code class="language-julia hljs">random_rotations = rand(64) .* 2π
plot_topoplot(
    dat[:, 50, 1];
    positions,
    axis = (; xlabel = &quot;Time [50 ms]&quot;),
    topo_attributes = (;
        label_scatter = (;
            markersize = 20,
            marker = &#39;↑&#39;,
            color = :black,
            rotation = random_rotations,
        )
    ),
)</code></pre><img src="7a5636c4.png" alt="Example block output"/><p>Marker size change</p><pre><code class="language-julia hljs">plot_topoplot(
    dat[:, 50, 1];
    positions,
    axis = (; xlabel = &quot;Time [50 ms]&quot;),
    topo_attributes = (;
        label_scatter = (; markersize = random_rotations, marker = :circle, color = :black)
    ),
)</code></pre><img src="ee1044bf.png" alt="Example block output"/><h1 id="Configurations-of-Topoplot"><a class="docs-heading-anchor" href="#Configurations-of-Topoplot">Configurations of Topoplot</a><a id="Configurations-of-Topoplot-1"></a><a class="docs-heading-anchor-permalink" href="#Configurations-of-Topoplot" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldMakie.plot_topoplot" href="#UnfoldMakie.plot_topoplot"><code>UnfoldMakie.plot_topoplot</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot_topoplot!(f::Union{GridPosition, GridLayout, Figure}, data::Union{&lt;:Observable{&lt;:DataFrame},&lt;:AbstractDataFrame,&lt;:AbstractVector}; positions::Vector, labels = nothing, kwargs...)
plot_topoplot(data::Union{&lt;:Observable{&lt;:DataFrame},&lt;:AbstractDataFrame,&lt;:AbstractVector}; position::Vector, labels = nothing, kwargs...)</code></pre><p>Plot a topoplot.</p><p><strong>Arguments</strong></p><ul><li><code>f::Union{GridPosition, GridLayout, Figure}</code><br/>  <code>Figure</code>, <code>GridLayout</code>, or <code>GridPosition</code> to draw the plot.</li><li><code>data::Union{&lt;:Observable{&lt;:DataFrame},&lt;:AbstractDataFrame,&lt;:AbstractVector}</code> <br/>  Data for the plot visualization.</li><li><code>positions::Vector{Point{2, Float32}}</code><br/>  Positions used if <code>data</code> is not a <code>DataFrame</code>. Positions are generated from <code>labels</code> if <code>positions = nothing</code>.</li><li><code>labels::Vector{String} = nothing</code><br/>  Labels used if <code>data</code> is not a DataFrame.</li><li><code>high_chan = nothing</code> - channnel(s) to highlight by color.</li><li><code>high_color = :darkgreen</code> - color for highlighting. </li><li><code>topo_axis::NamedTuple = (;)</code><br/>  Here you can flexibly change configurations of the topoplot axis.<br/>  To see all options just type <code>?Axis</code> in REPL.<br/>  Defaults: (width = Relative(1.0f0), height = Relative(1.0f0), halign = 0.05, valign = 0.95, aspect = DataAspect())</li><li><code>topo_attributes::NamedTuple = (;)</code><br/>  Here you can flexibly change configurations of the topoplot interoplation.<br/>  To see all options just type <code>?Topoplot.topoplot</code> in REPL.<br/>  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()</li></ul><p><strong>Shared plot configuration options</strong></p><p>The shared plot options can be used as follows: <code>type = (; key = value, ...))</code>.<br/>For example, <code>plot_x(...; colorbar = (; vertical = true, label = &quot;Test&quot;))</code>.<br/>Multiple defaults will be cycled until match.</p><p>Placing <code>;</code> is important!</p><p><strong>figure =</strong> NamedTuple() - <em>use <code>kwargs...</code> of <a href="https://docs.makie.org/stable/explanations/figure/"><code>Makie.Figure</code></a></em> </p><p><strong>axis =</strong> (xlabel = &quot;Time&quot;, aspect = Makie.DataAspect()) - <em>use <code>kwargs...</code> of  <a href="https://docs.makie.org/stable/reference/blocks/axis/"><code>Makie.Axis</code></a></em> </p><p><strong>layout =</strong> (show_legend = true, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label =&gt; 0)) - <em>check this <a href="https://unfoldtoolbox.github.io/UnfoldMakie.jl/dev/generated/how_to/hide_deco/">page</a></em> </p><p><strong>mapping =</strong> (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing)) - <em>use any mapping from <a href="https://aog.makie.org/stable/layers/mapping/"><code>AlgebraOfGraphics</code></a></em> </p><p><strong>visual =</strong> (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = true, label_text = false, bounding_geometry = GeometryBasics.Circle) - <em>use <code>kwargs...</code> of <a href="https://makieorg.github.io/TopoPlots.jl/stable/eeg/"><code>Topoplot.eeg_topoplot</code></a></em> </p><p><strong>legend =</strong> (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - <em>use <code>kwargs...</code> of  <a href="https://docs.makie.org/stable/reference/blocks/legend/"><code>Makie.Legend</code></a></em> </p><p><strong>colorbar =</strong> (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = &quot;Voltage [µV]&quot;) - <em>use <code>kwargs...</code> of  <a href="https://docs.makie.org/stable/reference/blocks/colorbar/"><code>Makie.Colorbar</code></a></em> </p><p><strong>Return Value:</strong> <code>Figure</code> displaying the Topoplot.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldMakie.jl/blob/cfd24a9893953525dcef7c07fd64942aad097623/src/general_plots/plot_topoplot.jl#L1-L28">source</a></section></article><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../butterfly/">« Butterfly plot</a><a class="docs-footer-nextpage" href="../topoplotseries/">Topoplot series »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Monday 20 October 2025 12:36">Monday 20 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
