<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Circular topoplots · UnfoldMakie.jl</title><meta name="title" content="Circular topoplots · UnfoldMakie.jl"/><meta property="og:title" content="Circular topoplots · UnfoldMakie.jl"/><meta property="twitter:title" content="Circular topoplots · UnfoldMakie.jl"/><meta name="description" content="Documentation for UnfoldMakie.jl."/><meta property="og:description" content="Documentation for UnfoldMakie.jl."/><meta property="twitter:description" content="Documentation for UnfoldMakie.jl."/><meta property="og:url" content="https://unfoldtoolbox.github.io/UnfoldMakie.jl/generated/tutorials/circ_topo/"/><meta property="twitter:url" content="https://unfoldtoolbox.github.io/UnfoldMakie.jl/generated/tutorials/circ_topo/"/><link rel="canonical" href="https://unfoldtoolbox.github.io/UnfoldMakie.jl/generated/tutorials/circ_topo/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="UnfoldMakie.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">UnfoldMakie.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">UnfoldMakie Documentation</a></li><li><span class="tocitem">Intro</span><ul><li><a class="tocitem" href="../../intro/installation/">Installation</a></li><li><a class="tocitem" href="../../intro/plot_types/">Plot types</a></li><li><a class="tocitem" href="../../intro/code_principles/">Code principles</a></li></ul></li><li><span class="tocitem">Visualization Types</span><ul><li><a class="tocitem" href="../erp/">ERP plot</a></li><li><a class="tocitem" href="../butterfly/">Butterfly plot</a></li><li><a class="tocitem" href="../topoplot/">Topoplot</a></li><li><a class="tocitem" href="../topoplotseries/">Topoplot series</a></li><li><a class="tocitem" href="../erp_grid/">ERP grid</a></li><li><a class="tocitem" href="../erpimage/">ERP image</a></li><li><a class="tocitem" href="../channel_image/">Channel image</a></li><li><a class="tocitem" href="../parallelcoordinates/">Parallel plot</a></li><li><a class="tocitem" href="../designmatrix/">Design matrix</a></li><li class="is-active"><a class="tocitem" href>Circular topoplots</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Setup"><span>Setup</span></a></li><li><a class="tocitem" href="#Package-loading"><span>Package loading</span></a></li><li><a class="tocitem" href="#Data-generation"><span>Data generation</span></a></li><li class="toplevel"><a class="tocitem" href="#Plot-generations"><span>Plot generations</span></a></li><li class="toplevel"><a class="tocitem" href="#Configurations-of-Circular-Topoplots"><span>Configurations of Circular Topoplots</span></a></li></ul></li></ul></li><li><span class="tocitem">How To</span><ul><li><a class="tocitem" href="../../how_to/position2color/">Change colormap of Butterfly plot</a></li><li><a class="tocitem" href="../../how_to/hide_deco/">Hide Decorations and Axis Spines</a></li><li><a class="tocitem" href="../../how_to/mult_vis_in_fig/">Include multiple figures in one</a></li></ul></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="../../explanations/positions/">Convert electrode positions from 3D to 2D</a></li></ul></li><li><a class="tocitem" href="../../../api/">API / DocStrings</a></li><li><a class="tocitem" href="../../../helper/">Utilities</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Visualization Types</a></li><li class="is-active"><a href>Circular topoplots</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Circular topoplots</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldMakie.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/unfoldtoolbox/UnfoldMakie.jl/blob/main/docs/literate/tutorials/circ_topo.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Circular-Topoplots"><a class="docs-heading-anchor" href="#Circular-Topoplots">Circular Topoplots</a><a id="Circular-Topoplots-1"></a><a class="docs-heading-anchor-permalink" href="#Circular-Topoplots" title="Permalink"></a></h1><p><strong>Circular topoplot series</strong> is a plot type for visualizing EEG activity in relation to some continous variable arranged on a circluar line. It can fully represent channel and channel location dimensions using contour lines. It can also partially represent the varaible dimension. Variable could be for instance accadic amplitude or degrees of visual angle. Basically, it is a series of Topoplots arranged on a circle.</p><h1 id="Setup"><a class="docs-heading-anchor" href="#Setup">Setup</a><a id="Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Setup" title="Permalink"></a></h1><h2 id="Package-loading"><a class="docs-heading-anchor" href="#Package-loading">Package loading</a><a id="Package-loading-1"></a><a class="docs-heading-anchor-permalink" href="#Package-loading" title="Permalink"></a></h2><pre><code class="language-julia hljs">using UnfoldMakie
using CairoMakie
using TopoPlots # for example data
using Random
using DataFrames</code></pre><h2 id="Data-generation"><a class="docs-heading-anchor" href="#Data-generation">Data generation</a><a id="Data-generation-1"></a><a class="docs-heading-anchor-permalink" href="#Data-generation" title="Permalink"></a></h2><p>Generate a <code>Dataframe</code>. We need to specify the Topoplot positions either via <code>position</code>, or via <code>labels</code>.</p><pre><code class="language-julia hljs">data, pos = TopoPlots.example_data();
dat = data[:, 240, 1]
df = DataFrame(
    :estimate =&gt; eachcol(Float64.(data[:, 100:40:300, 1])),
    :circular_variable =&gt; [0, 50, 80, 120, 180, 210],
    :time =&gt; 100:40:300,
)
df = flatten(df, :estimate);</code></pre><h1 id="Plot-generations"><a class="docs-heading-anchor" href="#Plot-generations">Plot generations</a><a id="Plot-generations-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-generations" title="Permalink"></a></h1><p>Note how the plots are located at the angles of the <code>circular_variable</code>.</p><pre><code class="language-julia hljs">plot_circular_topoplots(
    df;
    positions = pos,
    center_label = &quot;Relative angle [°]&quot;,
    predictor = :circular_variable,
)</code></pre><img src="abfad2a6.png" alt="Example block output"/><p>If the bounding variable is not between 0 and 360, since we are using time, we must specify it.</p><pre><code class="language-julia hljs">plot_circular_topoplots(
    df;
    positions = pos,
    center_label = &quot;Time [sec]&quot;,
    predictor = :time,
    predictor_bounds = [80, 320],
)</code></pre><img src="2f9169d2.png" alt="Example block output"/><h1 id="Configurations-of-Circular-Topoplots"><a class="docs-heading-anchor" href="#Configurations-of-Circular-Topoplots">Configurations of Circular Topoplots</a><a id="Configurations-of-Circular-Topoplots-1"></a><a class="docs-heading-anchor-permalink" href="#Configurations-of-Circular-Topoplots" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="UnfoldMakie.plot_circular_topoplots" href="#UnfoldMakie.plot_circular_topoplots"><code>UnfoldMakie.plot_circular_topoplots</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot_circular_topoplots!(f, data::DataFrame; kwargs...)
plot_circular_topoplots(data::DataFrame; kwargs...)</code></pre><p>Plot a circular EEG topoplot.</p><p><strong>Arguments</strong></p><ul><li><code>f::Union{GridPosition, GridLayout, Figure}</code><br/>  <code>Figure</code>, <code>GridLayout</code>, or <code>GridPosition</code> to draw the plot.<br/></li><li><code>data::DataFrame</code><br/>  DataFrame with data keys (columns <code>:y, :yhat, :estimate</code>), and :position (columns <code>:pos, :position, :positions</code>).</li></ul><p><strong>Keyword argumets (kwargs)</strong></p><ul><li><code>predictor::Vector{Any} = :predictor</code><br/>  The circular predictor value, defines position of topoplot across the circle.   Mapped around <code>predictor_bounds</code>.</li><li><code>predictor_bounds::Vector{Int64} = [0, 360]</code><br/>  The bounds of the predictor. Relevant for the axis labels.</li><li><code>positions::Vector{Point{2, Float32}} = nothing</code><br/>  Positions of the <a href="../topoplot/#topo_vis"><code>plot_topoplot</code></a>.</li><li><code>center_label::String = &quot;&quot;</code><br/>  The text in the center of the cricle.</li><li><code>plot_radius::String = 0.8</code><br/>  The radius of the circular topoplot series plot calucalted by formula: <code>radius = (minwidth * plot_radius) / 2</code>.</li><li><code>labels::Vector{String} = nothing</code><br/>  Labels for the <a href="../topoplot/#topo_vis"><code>plot_topoplots</code></a>.</li></ul><p><strong>Shared plot configuration options</strong></p><p>The shared plot options can be used as follows: <code>type = (; key = value, ...))</code>.<br/>For example, <code>plot_x(...; layout = (; show_legend = true, legend_position = :right))</code>.<br/>Multiple defaults will be cycled until match.</p><p>Placing <code>;</code> is important!</p><p><strong>figure =</strong> NamedTuple() - <em>use <code>kwargs...</code> of <a href="https://docs.makie.org/stable/explanations/figure/"><code>Makie.Figure</code></a></em> </p><p><strong>axis =</strong> (xlabel = &quot;&quot;, aspect = Makie.DataAspect(), label = &quot;&quot;) - <em>use <code>kwargs...</code> of  <a href="https://docs.makie.org/stable/reference/blocks/axis/"><code>Makie.Axis</code></a></em> </p><p><strong>layout =</strong> (show_legend = false, legend_position = :right, xlabelFromMapping = :x, ylabelFromMapping = :y, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label =&gt; 0))  </p><p><strong>mapping =</strong> (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing))  </p><p><strong>visual =</strong> (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), label_scatter = true, label_text = true, bounding_geometry = GeometryBasics.Circle) - <em>use <code>kwargs...</code> of <a href="https://makieorg.github.io/TopoPlots.jl/stable/eeg/"><code>Topoplot.eeg_topoplot</code></a></em> </p><p><strong>legend =</strong> (orientation = :vertical, tellwidth = true, tellheight = false) - <em>use <code>kwargs...</code> of  <a href="https://docs.makie.org/stable/reference/blocks/legend/"><code>Makie.Legend</code></a></em> </p><p><strong>colorbar =</strong> (vertical = true, tellwidth = true, tellheight = false, flipaxis = true, labelrotation = -1.5707963267948966, label = &quot;Voltage [µV]&quot;, colormap = Makie.Reverse{Symbol}(:RdBu)) - <em>use <code>kwargs...</code> of  <a href="https://docs.makie.org/stable/reference/blocks/colorbar/"><code>Makie.Colorbar</code></a></em> </p><p><strong>Return Value:</strong> <code>Figure</code> displaying the Circular topoplot series.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/unfoldtoolbox/UnfoldMakie.jl/blob/54d481f7032c1d47e6c7f336c5b7b91a6d17d90f/src/plot_circular_topoplots.jl#L1-L32">source</a></section></article><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../designmatrix/">« Design matrix</a><a class="docs-footer-nextpage" href="../../how_to/position2color/">Change colormap of Butterfly plot »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 17 June 2024 14:14">Monday 17 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
