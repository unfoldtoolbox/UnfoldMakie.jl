var documenterSearchIndex = {"docs":
[{"location":"generated/tutorials/butterfly/#bfp_vis","page":"Butterfly plot","title":"Butterfly Plot","text":"Butterfly plot is a plot type for visualisation of Event-related potentials. It can fully represent time and channels dimensions using lines. With addition of topoplot inset it can also represent location of channels. It called \"butterfly\" because the envelope of channels reminds butterfly wingsü¶ã.\n\nThe configurations of ERP plots and Butterfly plots are somehow similar.","category":"section"},{"location":"generated/tutorials/butterfly/#Setup","page":"Butterfly plot","title":"Setup","text":"Package loading\n\nThe following modules are necessary for run this tutorial:\n\nusing UnfoldMakie\nusing Unfold\nusing CairoMakie\nusing DataFrames\nusing Colors\n\nNote that DataFramesMeta is also used here in order to be able to use @subset for testing (filtering).\n\nData\n\nWe filter the data to make it more clearly represented:\n\ndf, pos = UnfoldMakie.example_data(\"TopoPlots.jl\")\nfirst(df, 3)","category":"section"},{"location":"generated/tutorials/butterfly/#Plot-Butterfly-Plots","page":"Butterfly plot","title":"Plot Butterfly Plots","text":"The default butterfly plot:\n\nplot_butterfly(df, axis = (; xlabel = \"Time [s]\"))\n\nThe butterfly plot with corresponding topoplot. You need to provide the channel positions.\n\nplot_butterfly(df; positions = pos, axis = (; xlabel = \"Time [s]\"))\n\nYou want to change size of topoplot markers and size of topoplot:\n\nplot_butterfly(\n    df;\n    positions = pos,\n    topo_attributes = (; label_scatter = (; markersize = 30)),\n    topo_axis = (; height = Relative(0.4), width = Relative(0.4)),\n    axis = (; xlabel = \"Time [s]\"),\n)\n\nYou want to add vline and hline:\n\nf = Figure()\nplot_butterfly!(f, df; positions = pos, axis = (; xlabel = \"Time [s]\"))\nhlines!(0, color = :gray, linewidth = 1)\nvlines!(0, color = :gray, linewidth = 1)\nf\n\nYou want to remove all decorations:\n\nplot_butterfly(\n    df;\n    positions = pos,\n    axis = (; xlabel = \"Time [s]\"),\n    layout = (; hidedecorations = (:label => true, :ticks => true, :ticklabels => true)),\n)","category":"section"},{"location":"generated/tutorials/butterfly/#Changing-the-colors-of-channels","page":"Butterfly plot","title":"Changing the colors of channels","text":"Please check this page.\n\nYou want to highlight a specific channel or channels. Specify channels first:\n\ndf.highlight1 = in.(df.channel, Ref([12])) # for single channel\ndf.highlight2 = in.(df.channel, Ref([10, 12])) # for multiple channels\nnothing #hide\n\nSecond, you can highlight it or them by color.\n\ngray = Colors.RGB(128 / 255, 128 / 255, 128 / 255)\nf = Figure(size = (1000, 400))\nplot_butterfly!(\n    f[1, 1],\n    df;\n    positions = pos,\n    mapping = (; color = :highlight1),\n    visual = (; color = 1:2, colormap = [gray, :red]),\n    axis = (; xlabel = \"Time [s]\"),\n)\nplot_butterfly!(\n    f[1, 2],\n    df;\n    positions = pos,\n    mapping = (; color = :highlight2),\n    visual = (; color = 1:2, colormap = [gray, :red]),\n    axis = (; xlabel = \"Time [s]\"),\n)\nf\n\nOr by faceting:\n\ndf.highlight2 = replace(df.highlight2, true => \"channels 10, 12\", false => \"all channels\")\n\nplot_butterfly(\n    df;\n    positions = pos,\n    mapping = (; color = :highlight2, col = :highlight2),\n    visual = (; color = 1:2, colormap = [gray, :red]),\n    axis = (; xlabel = \"Time [s]\"),\n)","category":"section"},{"location":"generated/tutorials/butterfly/#Column-Mappings","page":"Butterfly plot","title":"Column Mappings","text":"Since butterfly plots use a DataFrame as input, the library needs to know the names of the columns used for plotting. You can set these mapping values by calling plot_butterfly(...; mapping=(; :x=:time)). Just specify a NamedTuple. Note the ; right after the opening parentheses.","category":"section"},{"location":"generated/tutorials/butterfly/#Configurations-of-Butterfly-Plot","page":"Butterfly plot","title":"Configurations of Butterfly Plot","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/butterfly/#UnfoldMakie.plot_butterfly","page":"Butterfly plot","title":"UnfoldMakie.plot_butterfly","text":"plot_butterfly(plot_data::Union{DataFrame, AbstractMatrix}; kwargs...)\nplot_butterfly(times::Vector, plot_data::Union{DataFrame, AbstractMatrix}; kwargs...)\nplot_butterfly!(f::Union{GridPosition, GridLayout, Figure}, plot_data::Union{DataFrame, AbstractMatrix}; kwargs...)\n\nPlot a Butterfly plot.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, AbstractMatrix}\n  Data for the ERP plot visualization.\nkwargs...\n  Additional styling behavior. \n  Often used as: plot_butterfly(df; visual = (; colormap = :romaO)).\n\nKeyword arguments (kwargs)\n\npositions::Array = [] \n  Adds a topoplot as an inset legend to the provided channel positions. Must be the same length as plot_data.     To change the colors of the channel lines use the topoposition_to_color function.\nnticks::Union{Int,Tuple{Int,Int}, NamedTuple{(:x,:y),Tuple{Int,Int}}} = 5\n  Set the number of tick positions (x,y). Acepts 3 types fo arguments: 6 (=both axes are 6), (5,7), or (x=5, y=7).    Controls positions only (use xtickformat/ytickformat for labels).\ntopolegend::Bool = true\n  Show an inlay topoplot with corresponding electrodes. Requires positions.\ntopopositions_to_color::x -> pos_to_color_RomaO(x)\n  Change the line colors.\ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(0.35f0), height = Relative(0.35f0), halign = 0.05, valign = 0.95, aspect = 1)\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: (head = (color = :black, linewidth = 1), label_scatter = (markersize = 10, strokewidth = 0.5), interpolation = TopoPlots.NullInterpolator())\nmapping = (;)\n  For highlighting specific channels.\n  Example: mapping = (; color = :highlight)), where :highlight is variable with appopriate mapping.\n\nReturn Value: Figure displaying Butterfly plot.\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time [s]\", ylabel = \"Voltage [¬µV]\", yticklabelsize = 14, xtickformat = UnfoldMakie.var\"#PlotConfig##0#PlotConfig##1\"(), ytickformat = UnfoldMakie.var\"#PlotConfig##2#PlotConfig##3\"(), xautolimitmargin = (0.01, 0.01)) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = false, use_colorbar = true, use_legend = true, hidespines = (:r, :t), hidedecorations = Dict{Symbol, Bool}(:label => 0, :ticks => 0, :ticklabels => 0)) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y), color = (:channel, :channels, :trial, :trials), positions = (:pos, :positions, :position, :topo_positions, :x, nothing), labels = (:labels, :label, :topoLabels, :sensor, nothing), group = (:channel,)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = nothing, color = nothing) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, framevisible = false, position = :right) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"\", flipaxis = true) - use kwargs... of  AlgebraOfGraphics.colorbar! \n\nsee also plot_erp\n\n\n\n\n\n","category":"function"},{"location":"generated/how_to/position2color/#pos2color","page":"Colormap of butterfly plot","title":"Change colormap of Butterfly plot ","text":"You want to change the colors of the lines and markers on the inserted topoplot. To do that you need to change the color scheme (aka color map) of the butterfly plot. You can find th elist of colormaps for Makie here.","category":"section"},{"location":"generated/how_to/position2color/#Setup","page":"Colormap of butterfly plot","title":"Setup","text":"using UnfoldMakie\nusing CairoMakie\nusing DataFramesMeta\nusing Colors\n\nresults, positions = UnfoldMakie.example_data(\"TopoPlots.jl\");\nnothing #hide\n\nBy default the plot looks like this:\n\nplot_butterfly(results; positions = positions)","category":"section"},{"location":"generated/how_to/position2color/#Color-schemes","page":"Colormap of butterfly plot","title":"Color schemes","text":"","category":"section"},{"location":"generated/how_to/position2color/#MNE-style","page":"Colormap of butterfly plot","title":"MNE style","text":"We can change the color scale by specifying a function that maps from an (x, y) tuple to a color. UnfoldMakie currently provides three different color scales:\n\npos2colorRGB (same as MNE-Python),\npos2colorHSV (HSV color space),\npos2colorRomaO.\n\nWhile RGB & HSV have the advantage of being 2D color maps, Roma0 has the advantage of being perceptually uniform. Also you can specify a uniform color.\n\nplot_butterfly(\n    results;\n    positions = positions,\n    topopositions_to_color = pos -> UnfoldMakie.pos_to_color_RGB(pos),\n)","category":"section"},{"location":"generated/how_to/position2color/#HSV-Space","page":"Colormap of butterfly plot","title":"HSV-Space","text":"plot_butterfly(\n    results;\n    positions = positions,\n    topopositions_to_color = UnfoldMakie.pos_to_color_HSV,\n)","category":"section"},{"location":"generated/how_to/position2color/#Uniform-Color","page":"Colormap of butterfly plot","title":"Uniform Color","text":"You can make all lines \"gray\", or any other arbitrary color. Also you can make it a function of electrode position.\n\nplot_butterfly(\n    results;\n    positions = positions,\n    topopositions_to_color = x -> Colors.RGB(0.5),\n)","category":"section"},{"location":"generated/how_to/position2color/#Transparency","page":"Colormap of butterfly plot","title":"Transparency","text":"Unlike RGB, RGBA has a fourth channel, alpha, which is responsible for transparency. Here are two examples of how to manipulate it.\n\nf = Figure()\nplot_butterfly!(\n    f[1, 1],\n    results;\n    positions = positions,\n    topopositions_to_color = x -> (RGBA(UnfoldMakie.pos_to_color_RomaO(x), 1)),\n)\n\nplot_butterfly!(\n    f[2, 1],\n    results;\n    positions = positions,\n    topopositions_to_color = x -> (GrayA(UnfoldMakie.pos_to_color_RomaO(x), 0.5)),\n)\nf\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/topoplotseries/#Topoplot-Series","page":"Topoplot series","title":"Topoplot Series","text":"Topoplot series is a plot type for visualizing EEG activity in a given time frame or time interval. It can fully represent channel and channel location dimensions using contour lines. It can also partially represent the time dimension. Basically, it is a series of Topoplots.","category":"section"},{"location":"generated/tutorials/topoplotseries/#Setup","page":"Topoplot series","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing DataFrames\nusing CairoMakie\nusing TopoPlots\nusing Statistics\n\nData input\n\ndat, positions = TopoPlots.example_data()\ndf = UnfoldMakie.eeg_array_to_dataframe(dat[:, :, 1], string.(1:length(positions)));\nnothing #hide","category":"section"},{"location":"generated/tutorials/topoplotseries/#Number-of-topoplots","page":"Topoplot series","title":"Number of topoplots","text":"There are two ways to specify the number of topoplots in a topoplot series: bin_width - specify the interval between topoplots\n\nbin_width = 80\nplot_topoplotseries(\n    df;\n    bin_width,\n    positions = positions,\n    axis = (; xlabel = \"Time windows [s]\"),\n)\n\nbin_num - specify the number of topoplots\n\nplot_topoplotseries(\n    df;\n    bin_num = 5,\n    positions = positions,\n    axis = (; xlabel = \"Time windows [s]\"),\n)","category":"section"},{"location":"generated/tutorials/topoplotseries/#Categorical-and-contionous-x-values","page":"Topoplot series","title":"Categorical and contionous x-values","text":"By deafult x-value is time, but it could be any contionous (i.g. saccade amplitude) or categorical (any experimental variable) value.\n\nf = Figure()\ndf_cat = UnfoldMakie.eeg_array_to_dataframe(dat[:, 1:5, 1], string.(1:length(positions)))\ndf_cat.condition = repeat([\"A\", \"B\", \"C\", \"D\", \"E\"], size(df_cat, 1) √∑ 5)\n\nplot_topoplotseries!(\n    f[1, 1],\n    df_cat;\n    nrows = 2,\n    mapping = (; col = :condition),\n    axis = (; xlabel = \"Conditions\"),\n    positions = positions,\n)\nf\n\nnote: Warning\nVersion with conditional mapping.row is not yet implemented.\n\nTo create topoplot series with categorical values:\n\nDo not specify bin_width or bin_num.\nPut categorical value in mapping.col.","category":"section"},{"location":"generated/tutorials/topoplotseries/#Additional-features","page":"Topoplot series","title":"Additional features","text":"","category":"section"},{"location":"generated/tutorials/topoplotseries/#Adjusting-individual-topoplots","page":"Topoplot series","title":"Adjusting individual topoplots","text":"By using topoplot_axes you can flexibly change configurations of topoplots.\n\ndf_adj = UnfoldMakie.eeg_array_to_dataframe(dat[:, 1:4, 1], string.(1:length(positions)))\ndf_adj.condition = repeat([\"A\", \"B\", \"C\", \"D\"], size(df_adj, 1) √∑ 4)\n\nplot_topoplotseries(\n    df_adj;\n    nrows = 2,\n    positions = positions,\n    mapping = (; col = :condition),\n    axis = (; title = \"axis title\", xlabel = \"Conditions\"),\n    topoplot_axes = (;\n        rightspinevisible = true,\n        xlabelvisible = false,\n        title = \"single topoplot title\",\n    ),\n)","category":"section"},{"location":"generated/tutorials/topoplotseries/#Adjusting-column-gaps","page":"Topoplot series","title":"Adjusting column gaps","text":"Using colgap in with_theme helps to adjust column gaps.\n\nwith_theme(colgap = 5) do\n    plot_topoplotseries(\n        df,\n        bin_num = 5;\n        positions = positions,\n        axis = (; xlabel = \"Time windows [s]\"),\n    )\nend\n\nHowever it doesn't work with subsets. Here you need to use topoplot_axes.limits.\n\nbegin\n    f = Figure()\n    plot_topoplotseries!(\n        f[1, 1],\n        df,\n        bin_num = 5;\n        positions = positions,\n        topoplot_axes = (; limits = (-0.05, 1.05, -0.1, 1.05)),\n        axis = (; xlabel = \"Time windows [s]\"),\n    )\n    f\nend","category":"section"},{"location":"generated/tutorials/topoplotseries/#Adjusting-contours","page":"Topoplot series","title":"Adjusting contours","text":"Topographic contour is a line drawn on a topographic map to indicate an increase or decrease in voltage. A contour level is an area with a specific range of voltage. By default, the number of contour levels is 6, which means that the topography plot is divided into 6 areas depending on their voltage values.\n\nplot_topoplotseries(\n    df;\n    bin_width,\n    positions = positions,\n    visual = (; enlarge = 0.9, contours = (; linewidth = 1, color = :black)),\n    axis = (; xlabel = \"Time windows [s]\"),\n)","category":"section"},{"location":"generated/tutorials/topoplotseries/#Aggregating-functions","page":"Topoplot series","title":"Aggregating functions","text":"In this example combinefun is specified by mean, median and std.\n\nf = Figure(size = (500, 500))\nplot_topoplotseries!(\n    f[1, 1],\n    df;\n    bin_width,\n    positions = positions,\n    combinefun = mean,\n    axis = (; xlabel = \"\", title = \"combinefun = mean\"),\n)\nplot_topoplotseries!(\n    f[2, 1],\n    df;\n    bin_width,\n    positions = positions,\n    combinefun = median,\n    axis = (; xlabel = \"\", title = \"combinefun = median\"),\n)\nplot_topoplotseries!(\n    f[3, 1],\n    df;\n    bin_width,\n    positions = positions,\n    combinefun = std,\n    axis = (; title = \"combinefun = std\", xlabel = \"Time windows [s]\"),\n)\nf","category":"section"},{"location":"generated/tutorials/topoplotseries/#Multiple-rows","page":"Topoplot series","title":"Multiple rows","text":"Use nrows to specify multiple rows.\n\nf = Figure()\ndf_col = UnfoldMakie.eeg_array_to_dataframe(dat[:, :, 1], string.(1:length(positions)))\nplot_topoplotseries!(\n    f[1, 1:5],\n    df_col;\n    bin_num = 16,\n    nrows = 4,\n    positions = positions,\n    visual = (; label_scatter = false, contours = false),\n    axis = (; xlabel = \"Time windows [s]\"),\n)\nf","category":"section"},{"location":"generated/tutorials/topoplotseries/#Row-mapping","page":"Topoplot series","title":"Row mapping","text":"Use mapping.row to specify faceting by condition.\n\ndf = UnfoldMakie.eeg_array_to_dataframe(dat[:, 1:12, 1], string.(1:length(positions)))\ndf.condition = repeat(repeat([\"A\", \"B\", \"C\"], inner = 4), 64)\ndf.time = repeat(repeat([1, 2, 3, 4], outer = 3), 64)\n\nwith_theme(rowgap = 0) do\n    plot_topoplotseries(\n        df;\n        bin_num = 4,\n        positions = positions,\n        mapping = (; row = :condition),\n    )\nend","category":"section"},{"location":"generated/tutorials/topoplotseries/#Channel-labels","page":"Topoplot series","title":"Channel labels","text":"Use visual to specify channel labelss and channels markers.  visual.label_text = true makes channel names visible.\n\nbegin\n    f = Figure()\n    df_col = UnfoldMakie.eeg_array_to_dataframe(dat[1:4, :, 1], string.(1:4))\n    labs4 = [\"s1\", \"s2\", \"s3\", \"s4\"]\n    plot_topoplotseries!(\n        f[1, 1:5],\n        df_col;\n        bin_num = 2,\n        positions = positions[4:7],\n        labels = labs4,\n        visual = (;\n            label_scatter = (\n                markersize = 15,\n                color = \"white\",\n                strokecolor = \"green\",\n                strokewidth = 2,\n            ),\n            label_text = true,\n        ),\n        axis = (; xlabel = \"Time windows [s]\"),\n    )\n    f\nend","category":"section"},{"location":"generated/tutorials/topoplotseries/#Configurations-of-Topoplot-series","page":"Topoplot series","title":"Configurations of Topoplot series","text":"Also you can:\n\nLabel the x-axis with axis.xlabel.\nHide electrode markers with visual.label_scatter.\nChange the color map with visual.colormap. The default is Reverse(:RdBu).\nAdjust the limits of the topoplot boxes with axis.xlim_topo and axis.ylim_topo. By default both are (-0.25, 0.25).\nAdjust the size of the figure with Figure(size = (x, y)).\nAdjust the padding between topoplot labels and axis labels using xlabelpadding and ylabelpadding.\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/topoplotseries/#UnfoldMakie.plot_topoplotseries","page":"Topoplot series","title":"UnfoldMakie.plot_topoplotseries","text":"plot_topoplotseries(f::Union{GridPosition, GridLayout, Figure}, data::Union{<:Observable{<:DataFrame},DataFrame}; kwargs...)\nplot_topoplotseries!(data::Union{<:Observable{<:DataFrame},DataFrame}; kwargs...)\n\nMultiple miniature topoplots in regular distances. \n\nArguments\n\nf::Union{GridPosition, GridLayout, GridLayoutBase.GridSubposition, Figure}\n  Figure, GridLayout, GridPosition, or GridLayoutBase.GridSubposition to draw the plot.\ndata::Union{<:Observable{<:DataFrame},DataFrame}\n  DataFrame with data or Observable DataFrame.\n  Requires a time column by default, but can be overridden by specifying mapping=(; x=:my_column) with any continuous or categorical column. \n\nKeyword arguments (kwargs)\n\nbin_width::Real = nothing\n  Number specifing the width of bin of continuous x-value in its units.\n\nbin_num::Real = nothing\n  Number of topoplots.\n  Either bin_width, or bin_num should be specified. Error if they are both specified\n  If mapping.col or mapping.row are categorical bin_width and bin_num stay as nothing.\ncombinefun::Function = mean\n  Specify how the samples within bin_width are summarised.\n  Example functions: mean, median, std. \nrasterize_heatmaps::Bool = true\n  Force rasterization of the plot heatmap when saving in svg format.\n  Except for the interpolated heatmap, all lines/points are vectors.\n  This is typically what you want, otherwise you get ~128x128 vectors per topoplot, which makes everything very slow.\ncol_labels::Bool, row_labels::Bool = true\n  Shows column and row labels in faceting mode. (not implemented)\npositions::Vector{Point{2, Float32}} = nothing\n  Specify channel positions. Requires the list of x and y positions for all unique electrodes.\nlabels::Vector{String} = nothing\n  Show labels for each electrode.\ninteractive_scatter = nothing\n  Enable interactive mode.\n  If you create obs_tuple = Observable((0, 0, 0)) and pass it into interactive_scatter you can update the observable tuple with the indices of the clicked topoplot markers.\n  (0, 0, 0) corresponds to the (row of topoplot layout, column of topoplot layout, electrode). \ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of topoplots.\n  To see all options just type ?Axis in REPL.\nmapping = (; col = :time, row = nothing, layout = nothing)\n  mapping.col - specify x-value, can be any continuous or categorical variable.\n  mapping.row - specify y-value, can be any continuous or categorical variable (not implemented yet).\n  mapping.layout - arranges topoplots by rows when equals :time.\n\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()\ntopolabels_rounding = (; sigdigits = 3)\n  Rounding of the topo_axis labels.\n  sigdigits - number of significant digits.\n  digits - number of digits after the decimal point.\n  Only one of sigdigits or digits should be provided.\n\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time windows\", aspect = Makie.DataAspect(), title = \"\", titlesize = 16, titlefont = :bold, ylabel = \"\", ylabelpadding = 25, xlabelpadding = 25, xpanlock = true, ypanlock = true, xzoomlock = true, yzoomlock = true, xrectzoom = false, yrectzoom = false) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label => 0)) - check this page \n\nmapping = (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing), col = (:time,), row = (nothing,)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = false, label_text = false, bounding_geometry = GeometryBasics.Circle, levels = nothing) - use kwargs... of Topoplot.eeg_topoplot \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Topoplot series.\n\n\n\n\n\n","category":"function"},{"location":"generated/explanations/plot_types/#The-Dilemma-of-Multidimensionality","page":"Plot types","title":"The Dilemma of Multidimensionality","text":"note: Note\nPlease read the paper The Art of Brainwaves, if you want to know how we come up with these plot types.\n\nEEG ‚Äì multidimensional data and could be presented differently.\n\nPossible dimensions:\n\nVoltage (must have)\nTime\nNumber of channels (1-128)\nSpatial layout of channels\nExperimental conditions\nTrials/subjects\n\n<img src=\"../../../assets/slicing.jpg\" align=\"middle\"/>\n\nEach way of ERP presentation is a choice of dimensions. Hard to show meaningfully more than 3 dimensions.","category":"section"},{"location":"generated/explanations/plot_types/#Plot-types","page":"Plot types","title":"Plot types","text":"Each plot type can represent several dimensions. Here we represented 8 plot types.\n\n<img src=\"../../../assets/dimensions.jpg\" align=\"middle\"/>\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/splines/#spline_vis","page":"Spline plot","title":"Spline plot","text":"Spline plot is a plot type for visualisation of  terms in an UnfoldModel. Two subplots are generated for each spline term: 1) the basis function of the spline; 2) the density of the underlying covariate.\n\nMultiple spline terms are arranged across columns. Dashed lines indicate spline knots.","category":"section"},{"location":"generated/tutorials/splines/#Setup","page":"Spline plot","title":"Setup","text":"Package and data loading\n\nusing Unfold, UnfoldMakie\nimport BSplineKit, DataFrames\n\ndf, pos = UnfoldMakie.example_data(\"TopoPlots.jl\")\nm1 = UnfoldMakie.example_data(\"UnfoldLinearModelwith1Spline\");\nm2 = UnfoldMakie.example_data(\"UnfoldLinearModelwith2Splines\");\nnothing #hide\n\nSpline plot with one spline term:\n\nplot_splines(m1)\n\nSpline plot with two spline terms:\n\nplot_splines(m2)","category":"section"},{"location":"generated/tutorials/splines/#Configurations-of-Spline-plot","page":"Spline plot","title":"Configurations of Spline plot","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/splines/#UnfoldMakie.plot_splines","page":"Spline plot","title":"UnfoldMakie.plot_splines","text":"plot_splines(m::UnfoldModel; kwargs...)\nplot_splines!(f::Union{GridPosition, GridLayout, Figure}, m::UnfoldModel; kwargs...)\n\nVisualization of spline terms in an UnfoldModel. Two subplots are generated for each spline term:\n1) the basis function of the spline; 2) the density of the underlying covariate.\nMultiple spline terms are arranged across columns.\nDashed lines indicate spline knots.\n\nArguments:\n\nf::Union{GridPosition, GridLayout, Figure}   Figure, GridLayout, or GridPosition to draw the plot.\nm::UnfoldModel\n  UnfoldModel with splines.\nspline_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of spline subplots.\n  To see all options just type ?Axis in REPL.\n  Defaults: (ylabel = \"Spline value\", xlabelvisible = false, xticklabelsvisible = false, ylabelvisible = true)    \ndensity_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of density subplots.\n  To see all options just type ?Axis in REPL.\n  Defaults: (xautolimitmargin = (0, 0), ylabel = \"Density value\")\nsuperlabel_config::NamedTuple = (;)\n  Here you can flexibly change configurations of the Label on the top of the plot.\n  To see all options just type ?Label in REPL.\n  Defaults: (fontsize = 20, padding = (0, 0, 40, 0))\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = NamedTuple() - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :viridis,) - use kwargs... of Makie.series \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, title = \"Splines\", framevisible = false) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure with splines and their density for basis functions.\n\n\n\n\n\n","category":"function"},{"location":"generated/explanations/installation/#Getting-Julia","page":"Installing Julia & UnfoldMakie.jl","title":"Getting Julia","text":"You can install Julia by following the instructions from the official website.","category":"section"},{"location":"generated/explanations/installation/#Setup-UnfoldMakie.jl","page":"Installing Julia & UnfoldMakie.jl","title":"Setup UnfoldMakie.jl","text":"After installing Julia, you can execute the julia.exe.","category":"section"},{"location":"generated/explanations/installation/#Generate-a-Project","page":"Installing Julia & UnfoldMakie.jl","title":"Generate a Project","text":"If you do not yet have a project you can generate one. First you type ] into the Julia console to switch from julia to (@VERSION) pkg. Here you can generate a project by using the command:\n\ngenerate \"FOLDER_PATH\"\n\nNote that the specific folder in which you want to generate the project does not already exist.","category":"section"},{"location":"generated/explanations/installation/#Activate-your-Project","page":"Installing Julia & UnfoldMakie.jl","title":"Activate your Project","text":"Before you can add the necessary modules to use UnfoldMakie you have to activate your project in the (@VERSION) pkg environment. The command is:\n\nactivate \"FOLDER_PATH\"","category":"section"},{"location":"generated/explanations/installation/#Install-the-UnfoldMakie-Module","page":"Installing Julia & UnfoldMakie.jl","title":"Install the UnfoldMakie Module","text":"When your project is activated you can add the module. The command is:\n\nadd UnfoldMakie","category":"section"},{"location":"generated/explanations/installation/#Using-the-Project-in-a-Pluto-Notebook","page":"Installing Julia & UnfoldMakie.jl","title":"Using the Project in a Pluto Notebook","text":"In case you want to use this generated project in a notebook (e.g. Pluto or Jupyter), you can activate this in the notebook in the following manner:\n\nbegin\n   using Pkg\n   Pkg.activate(\"FOLDER_PATH\")\n   Pkg.resolve()\nend\n\nUse slash / for the folder path.\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/topoplot/#topo_vis","page":"Topoplot","title":"Topoplot","text":"Topoplot (aka topography plot) is a plot type for visualisation of EEG activity in a specific time stemp or time interval. It can fully represent channel and channel location dimensions using contour lines.\n\nThe topoplot is a 2D projection and interpolation of the 3D distributed sensor activity. The name stems from physical geography, but instead of height, the contour lines represent voltage levels.","category":"section"},{"location":"generated/tutorials/topoplot/#Setup","page":"Topoplot","title":"Setup","text":"Package loading\n\nusing UnfoldMakie\nusing DataFrames\nusing CairoMakie, MakieThemes\nusing TopoPlots\n\nData loading\n\ntopo_array, topo_positions = TopoPlots.example_data();\nnothing #hide\n\nThe size of topo_array is 64√ó400√ó3. This means:\n\n64 channels;\n400 timepoints in range from -0.3 to 0.5 mseconds;\nEstimates of 3 averaging functions. Instead of displaying the EEG data for all subjects, here we aggregate the data using (1) mean, (2) standard deviation and (3) p-value within t-tests.\n\nWhile position consist of 64 x and y coordinates of each channels on a scalp.","category":"section"},{"location":"generated/tutorials/topoplot/#Plot-a-topoplot","page":"Topoplot","title":"Plot a topoplot","text":"Let's select a time point in 340 msec and the mean estimate.\n\nplot_topoplot(\n    topo_array[:, 340, 1];\n    positions = topo_positions,\n    axis = (; xlabel = \"Time [340 ms]\"),\n    colorbar = (; height = 350),\n)\n\nA typical topoplot consists of:\n\na head outline showing the voltage at a given time point or over a time window;\na colorbar for the voltage scale;\nchannel markers and labels (sensors/electrodes).","category":"section"},{"location":"generated/tutorials/topoplot/#Horizontal-colorbars","page":"Topoplot","title":"Horizontal colorbars","text":"Topoplot colorbars can be vertical or horizontal. Horizontal colorbars are useful when displaying multiple plots side by side. Set colorbar.vertical = false to switch to a horizontal orientation.\n\nplot_topoplot(\n    topo_array[:, 50, 1];\n    positions = topo_positions,\n    axis = (; xlabel = \"Time [50 ms]\"),\n    colorbar = (; vertical = false, width = 180),\n)","category":"section"},{"location":"generated/tutorials/topoplot/#Colormaps","page":"Topoplot","title":"Colormaps","text":"When choosing a colormap for topoplots, it should:\n\nBe ‚Äúscientific‚Äù: perceptually linear, with a meaningful and ordered color scale;\nBe diverging (to distinguish positive vs. negative effects);\nBe color-blind friendly.\n\nbegin\n    f = Figure(size = (700, 700))\n    Label(f[0, 1:3], \"Topoplots with Diverging Scientific Colormaps\"; fontsize = 22, halign = :center)\n\n    colormaps = [:berlin, :roma, :lisbon, :cork, :managua, :bam]\n\n    for (i, cmap) in enumerate(colormaps)\n        r = div(i-1, 3) + 1   # row index (1 or 2)\n        c = mod(i-1, 3) + 1   # column index (1 ‚Üí 3)\n\n        plot_topoplot!(f[r, c],\n            topo_array[:, 100, 1];\n            positions = topo_positions,\n            axis = (; xlabel = \"Time [100 ms]\", title = string(cmap)),\n            colorbar = (; vertical = false, width = 180),\n            visual = (; colormap = cmap, contours = false),\n        )\n    end\n    f\nend","category":"section"},{"location":"generated/tutorials/topoplot/#Channel-labels","page":"Topoplot","title":"Channel labels","text":"Changing fonts and font size Here we use arbitrary labels \"s1\", \"s2\", ..., \"s64\" for demonstration. To learn how to use real channel names, check the dedicated page about channel labels.\n\nlabels = [\"s$i\" for i = 1:size(topo_array, 1)]\n\nwith_theme(Theme(; fontsize = 25, fonts = (; regular = \"Ubuntu Mono\"))) do\n    plot_topoplot(\n        topo_array[:, 340, 1];\n        labels,\n        positions = topo_positions,\n        visual = (; label_text = true),\n        axis = (; xlabel = \"340 ms\"),\n    )\nend\n\nCheck that the font you choose is available on your PC or GitHub.","category":"section"},{"location":"generated/tutorials/topoplot/#Highlighting-channels","page":"Topoplot","title":"Highlighting channels","text":"Create per-channel styles\n\ncolors = fill(:black, 64)      # default\nsizes  = fill(8, 64)           # default size\nstrokes = fill(0.5, 64);        # default width\nnothing #hide\n\nHighlight first two\n\ncolors[1:2] .= (:orange, :orange)\nsizes[1:2] .= (14, 14)\nstrokes[1:2] .= (3, 3)\n\nplot_topoplot(\n    topo_array[:, 50, 1];\n    positions = topo_positions,\n    axis = (; xlabel = \"Time [50 ms]\"),\n    visual = (; colormap = :diverging_tritanopic_cwr_75_98_c20_n256),\n    topo_attributes = (;\n        label_scatter = (;\n            markersize = sizes,\n            color = colors,\n            strokewidth = strokes,\n            strokecolor = colors\n        )\n    ),\n)","category":"section"},{"location":"generated/tutorials/topoplot/#Advanced-markers","page":"Topoplot","title":"Advanced markers","text":"You can use markers and their proeprties as additional information dimension. For instance, to map uncertaitny or some other value to the marker size, color or rotation. This is done by setting the topo_attributes kwarg. The following example shows how to set the marker size and color based on the data values. Check more here.\n\nMarkers as arrows\n\nbegin\n    f = Figure()\n    uncert_norm = (topo_array[:, 340, 2] .- minimum(topo_array[:, 340, 2])) ./ (maximum(topo_array[:, 340, 2]) - minimum(topo_array[:, 340, 2]))\n    rotations = -uncert_norm .* œÄ # radians in [-2œÄ, 0], negaitve - clockwise rotation\n\n    arrow_symbols = ['‚Üë', '‚Üó', '‚Üí', '‚Üò', '‚Üì'] # 5 levels of uncertainty\n\n    angles = range(extrema(topo_array[:, 340, 2])...; length=5)\n    labels = [\"$(round(a, digits = 2))\" for a in angles] # correspons to uncertainty levels\n\n    plot_topoplot!(\n        f[1:6, 1],\n        topo_array[:, 340, 1];\n        positions = topo_positions,\n        topo_attributes = (;\n            label_scatter = (;\n                markersize = 20,\n                marker = '‚Üë',\n                color = :gray, strokecolor = :black, strokewidth = 1,\n                rotation = rotations,\n            )\n        ),\n        axis = (; xlabel = \"Time point [50 ms]\", xlabelsize = 24, ylabelsize = 24),\n        visual = (; colormap = :diverging_tritanopic_cwr_75_98_c20_n256, contours = false),\n        colorbar = (; labelsize = 24, ticklabelsize = 18)\n    )\n\n    mgroup = [MarkerElement(marker = sym, color = :black, markersize = 20)\n         for sym in arrow_symbols]\n\n    Legend(f[7, 1], mgroup, labels, \"Some\\nmeasure\";\n        patchlabelsize = 14, framevisible = false,\n        labelsize = 18, titlesize = 20,\n        orientation = :horizontal, titleposition = :left, margin = (90,0,0,0),)\n    f\nend\n\nMarker size change\n\nplot_topoplot(\n    topo_array[:, 50, 1];\n    positions = topo_positions,\n    axis = (; xlabel = \"Time [50 ms]\"),\n    topo_attributes = (;\n        label_scatter = (; markersize = rand(64) .* 2œÄ, marker = :circle, color = :black)\n    ),\n)","category":"section"},{"location":"generated/tutorials/topoplot/#Configurations-of-Topoplot","page":"Topoplot","title":"Configurations of Topoplot","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/topoplot/#UnfoldMakie.plot_topoplot","page":"Topoplot","title":"UnfoldMakie.plot_topoplot","text":"plot_topoplot!(f::Union{GridPosition, GridLayout, Figure}, data::Union{<:Observable{<:DataFrame},<:AbstractDataFrame,<:AbstractVector}; positions::Vector, labels = nothing, kwargs...)\nplot_topoplot(data::Union{<:Observable{<:DataFrame},<:AbstractDataFrame,<:AbstractVector}; position::Vector, labels = nothing, kwargs...)\n\nPlot a topoplot.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{<:Observable{<:DataFrame},<:AbstractDataFrame,<:AbstractVector} \n  Data for the plot visualization.\npositions::Vector{Point{2, Float32}}\n  Positions used if data is not a DataFrame. Positions are generated from labels if positions = nothing.\nlabels::Vector{String} = nothing\n  Labels used if data is not a DataFrame.\ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(1.0f0), height = Relative(1.0f0), halign = 0.05, valign = 0.95, aspect = DataAspect())\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", aspect = Makie.DataAspect()) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label => 0)) - check this page \n\nmapping = (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = true, label_text = false, bounding_geometry = GeometryBasics.Circle) - use kwargs... of Topoplot.eeg_topoplot \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nTo highlight some electrodes, you can use topo_attributes = (; label_scatter = (; ...))  where ... are the attributes for scatter! function.  For example, to change the marker size of all electrodes to 8,  use topo_attributes = (; label_scatter = (; markersize = 15)).  To set different sizes for each electrode, provide a vector of sizes with length equal  to the number of electrodes.\n\nReturn Value: Figure displaying the Topoplot.\n\n\n\n\n\n","category":"function"},{"location":"generated/how_to/hide_deco/#Hiding-decorations-and-spines","page":"Hide decorations and axis spines","title":"Hiding decorations and spines","text":"You have several options for efficiently hiding decorations and axis spines in a plot. Packages and data\n\nusing TopoPlots\nusing UnfoldMakie\nusing CairoMakie\nusing DataFrames\nusing UnfoldSim\n\ndata, pos = UnfoldMakie.example_data(\"TopoPlots.jl\")\ndat, evts = UnfoldSim.predef_eeg(; noiselevel = 10, return_epoched = true);\nnothing #hide","category":"section"},{"location":"generated/how_to/hide_deco/#Hiding","page":"Hide decorations and axis spines","title":"Hiding","text":"First, you can specify the axis settings with axis = (; ...).\n\nMakie.Axis provides multiple variables for different aspects of the plot. This means that removing all decorations is only possible by setting many variables each time.\n\nSecond, Makie does provide methods like hidespines! and hidedecorations!. Unforunately, user may lose access to a plot after it is drawn in.\n\nThird, hidespines! and hidedecorations! can be called by setting variables with layout = (; hidespines = (), hidedecorations = ()).\n\nYou still will able to specify it flexibly: hidespines = (:r, :t) will remove the top and right borders.\n\nf = Figure()\nplot_butterfly!(\n    f[1, 1],\n    data;\n    positions = pos,\n    topo_axis = (; height = Relative(0.4), width = Relative(0.4)),\n    axis = (; title = \"With decorations\"),\n)\nplot_butterfly!(\n    f[2, 1],\n    data;\n    positions = pos,\n    topo_axis = (; height = Relative(0.4), width = Relative(0.4)),\n    axis = (; title = \"Without decorations\"),\n    layout = (; hidedecorations = (:label => true, :ticks => true, :ticklabels => true)),\n)\nf\n\nYou can also completely remove all spines, decorations, color bars, and even padding.\n\nf = Figure(; figure_padding = 0)\nplot_erpimage!(\n    f,\n    dat;\n    layout = (; hidespines = (), hidedecorations = (), use_colorbar = false),\n)","category":"section"},{"location":"generated/how_to/hide_deco/#Showing","page":"Hide decorations and axis spines","title":"Showing","text":"Some plots hide features by default. This could be reverted by setting the variables to nothing\n\ndata, positions = TopoPlots.example_data()\nplot_topoplot(\n    data[:, 340, 1];\n    positions = positions,\n    layout = (; hidespines = nothing, hidedecorations = nothing),\n)\n\nFor more information on the input of these functions refer to the Makie dokumentation on Axis.\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/explanations/code_principles/#Clear-Code","page":"Code principles","title":"Clear Code","text":"Code should be clear and concise.\nVariables in the code should have meaningful names.\nFunction naming should follow established theories and naming conventions.\nAvoid functions longer than 50 lines to improve code readability. Write modular code by breaking complex tasks into smaller, reusable functions. Avoid deep nesting of loops and conditionals.\nAvoid putting more than 5 functions in a single file.\nAvoid pull requests that affect more than 10 files.\nMaintain consistent indentation and formatting across all files. Enforce it with linters (e.g., JuliaFormatter).\nWrite meaningful commit messages that explain what changed and why (e.g., \"Refactored plot function for better readability\" instead of \"fix\").\nMinimize external dependencies. Only use external libraries when necessary to avoid compatibility issues and to reduce installation and loading time.","category":"section"},{"location":"generated/explanations/code_principles/#Backward-Compatibility","page":"Code principles","title":"Backward Compatibility","text":"Backward compatibility means that newer versions of your software should work with old code written for older versions without major changes.\n\nProvide a clear changelog for new versions, detailing new features, fixes, and potential breaking changes.\nAvoid breaking changes whenever possible.\nEnsure consistent output formats. If your function previously returned a dictionary, avoid switching it to a list unless necessary.\nUse deprecation warnings. If a feature will be removed in future versions, notify users with warnings instead of immediately breaking their code.\nUse versioned documentation. Keep documentation for previous versions accessible so users with older codebases can still find relevant information.\nAvoid removing or renaming functions or their arguments. If you must remove a function or its argument, keep the old name as an alias or mark it as deprecated before removal.\nWrite unit tests to prevent unexpected behavior whenever you add new features.","category":"section"},{"location":"generated/explanations/code_principles/#User-Friendliness","page":"Code principles","title":"User-Friendliness","text":"Every function exposed to the user should have docstrings specifying all parameters, their types, and input/output arguments.\nEnsure the documentation includes visual and code examples where applicable, especially if the figure is commonly used and/or complex.\nUsers should have the ability to customize all parts of the figure.\nMost users will not check the default settings, so it is important to encourage them to label key details of the figure.\nComment the code, especially if the code is not self-explanatory. But don't overuse it.\nProvide meaningful error messages that guide users toward solutions.\nTest the usability of your code with non-expert users to identify pain points.\n\nWritten by Vladimir Mikheev\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/how_to/uncertain_topo/#Visualize-uncertainty-in-topoplots","page":"Uncertainty in topoplots","title":"Visualize uncertainty in topoplots","text":"<details>\n<summary>Click to expand</summary>\n\nusing Base: channeled_tasks\nusing Unfold\nusing UnfoldMakie\nusing UnfoldSim\nusing DataFrames\nusing CairoMakie\nusing TopoPlots\nusing Statistics\nusing Random\nusing Animations\n\n</details >\n\nRepresenting uncertainty is one of the most difficult tasks in visualization. It is especially difficult for heatmaps and topoplots. Here we will present new ways to show uncertainty for topoplots.\n\nUncertainty in EEG data usually comes from subjects and trials:\n\nSubjects can vary in phisological or behavioral characteristics;\nSomething can change between trials (electrode connection can get worse, etc.).\n\nThere are several measures of uncertainty. Here we will use standard deviation (x - mean(x) / N) and t-values (mean(x) / SE(x)).","category":"section"},{"location":"generated/how_to/uncertain_topo/#Data-input","page":"Uncertainty in topoplots","title":"Data input","text":"Data for customized topoplots:\n\ndat, positions = TopoPlots.example_data()\nvec_estimate = dat[:, 340, 1];\nvec_uncert = dat[:, 340, 2];\nnothing #hide\n\nData for animation:\n\ndf_toposeries, pos_toposeries = UnfoldMakie.example_data(\"bootstrap_toposeries\"; noiselevel = 7);\ndf_toposeries1 = df_toposeries[df_toposeries.trial.<=15, :];\nrng = MersenneTwister(1);\nnothing #hide\n\nThis will generate DataFrame with 227 channels, 50 trials, 500 mseconds for bootstrapping. noiselevel is important for adding variability it your data.","category":"section"},{"location":"generated/how_to/uncertain_topo/#Adjacent-topoplot","page":"Uncertainty in topoplots","title":"Adjacent topoplot","text":"In this case we already have two data vectors: vec_estimate with mean estimates and vec_uncert with standard deviation.\n\nbegin\n    f = Figure()\n    ax = Axis(f[1, 1:2], title = \"Time windows [340 ms]\", titlesize = 24, titlealign = :center,)\n\n    hidedecorations!(ax, label = false) ; hidespines!(ax)\n    plot_topoplot!(\n        f[1, 1],\n        vec_estimate;\n        positions = positions,\n        visual = (; contours = false),\n        axis = (; xlabel = \"\"),\n        colorbar = (; label = \"Voltage [¬µV]\", labelsize = 24, ticklabelsize = 18, vertical = false, width = 180),\n    )\n    plot_topoplot!(\n        f[1, 2],\n        vec_uncert;\n        positions = positions,\n        visual = (; colormap = (:viridis), contours = false),\n        axis = (; xlabel = \"\", xlabelsize = 24, ylabelsize = 24),\n        colorbar = (; label = \"Standard deviation\", labelsize = 24, ticklabelsize = 18, vertical = false, width = 180),\n    )\n    f\nend","category":"section"},{"location":"generated/how_to/uncertain_topo/#Uncertainty-via-marker-size","page":"Uncertainty in topoplots","title":"Uncertainty via marker size","text":"We show uncertainty using donut-shaped electrode markers. The donut keeps the estimate color visible while the marker size reflects uncertainty ‚Äî larger donuts mean higher uncertainty.\n\nbegin\n    f = Figure()\n    uncert_norm = (vec_uncert .- minimum(vec_uncert)) ./ (maximum(vec_uncert) - minimum(vec_uncert))\n    uncert_scaled = uncert_norm * 30 .+ 10\n\n    plot_topoplot!(\n        f[1:4, 1],\n        vec_estimate;\n        positions,\n        axis = (; xlabel = \"Time point [340 ms]\", xlabelsize = 24, ylabelsize = 24),\n        topo_attributes = (;\n            label_scatter = (; markersize = uncert_scaled, color = :transparent, strokecolor = :black,\n            strokewidth = uncert_scaled .* 0.25 )\n        ),\n        visual = (; colormap = :diverging_tritanopic_cwr_75_98_c20_n256, contours = false),\n        colorbar = (; labelsize = 24, ticklabelsize = 18)\n    )\n    markersizes = round.(Int, range(extrema(uncert_scaled)...; length = 5))\n\n    group_size = [MarkerElement(\n        marker = :circle,\n        color = :transparent, strokecolor = :black, strokewidth = ms √∑ 5,\n        markersize = ms) for ms in markersizes]\n    Legend(f[5, 1], group_size, [\"$ms\" for ms in markersizes], \"Standard\\ndeviation\",\n        patchsize = (maximum(markersizes) * 0.8, maximum(markersizes) * 0.8), framevisible = false,\n        labelsize = 18, titlesize = 20,\n        orientation = :horizontal, titleposition = :left, margin = (90,0,0,0))\n    f\nend","category":"section"},{"location":"generated/how_to/uncertain_topo/#Uncertainty-via-animation","page":"Uncertainty in topoplots","title":"Uncertainty via animation","text":"In this case, we need to boostrap the data, so we'll use raw data with single trials.\n\nTo show the uncertainty of the estimate, we will compute 10 different means of the boostrapped data. More specifically: 1) create N boostrapped data sets using random sampling with replacement across trials; 2) compute their means; 3) do a toposeries animation iterating over these means.\n\n<details>\n<summary>Click to expand for supportive functions</summary>\n\nWith this function we will bootstrap the data. rng - random number generated. Be sure to send the same rng from outside the function.\n\nbootstrap_toposeries(df; kwargs...) = bootstrap_toposeries(MersenneTwister(), df; kwargs...)\nfunction bootstrap_toposeries(rng::AbstractRNG, df)\n    df1 = groupby(df, [:time, :channel])\n    len_estimate = length(df1[1].estimate)\n    bootstrap_ix = rand(rng, 1:len_estimate, len_estimate) # random sample with replacement\n    tmp = vcat([d.estimate[bootstrap_ix] for d in df1]...)\n    df1 = DataFrame(df1)\n\n    df1.estimate .= tmp\n    return df1\nend\n\nfunction for easing - smooth transition between frames in animation. update_ratio - transition ratio between time1 and time2. at - create animation object: 0 and 1 are time points, old and new are data vectors.\n\nfunction ease_between(old, new, update_ratio; easing_function = sineio())\n    anim = Animation(0, old, 1, new; defaulteasing = easing_function)\n    return at(anim, update_ratio)\nend\n\n</details >\n\ndat_obs = Observable(df_toposeries1)\nf = Figure()\nplot_topoplotseries!(\n    f[1, 1],\n    dat_obs;\n    bin_num = 5,\n    nrows = 2,\n    positions = pos_toposeries,\n    visual = (; contours = false),\n    axis = (; xlabel = \"Time [msec]\"),\n)\n\nBasic toposeries.\n\nrecord(f, \"bootstrap_toposeries_nocontours.mp4\"; framerate = 2) do io\n    for i = 1:10\n        dat_obs[] = bootstrap_toposeries(rng, df_toposeries1)\n        recordframe!(io)\n    end\nend;\nnothing #hide\n\n(Image: )\n\nToposeries with easing. Easing means smooth transition between frames.\n\ndat_obs = Observable(bootstrap_toposeries(rng, df_toposeries1))\nf = Figure()\nplot_topoplotseries!(\n    f[1, 1],\n    dat_obs;\n    bin_num = 5,\n    nrows = 2,\n    positions = pos_toposeries,\n    visual = (; contours = false),\n    axis = (; xlabel = \"Time [msec]\"),\n)\nrecord(f, \"bootstrap_toposeries_easing.mp4\"; framerate = 10) do io\n    for n_bootstrapping = 1:10\n        recordframe!(io)\n        new_df = bootstrap_toposeries(rng, df_toposeries1)\n        old_estimate = deepcopy(dat_obs.val.estimate)\n        for update_ratio in range(0, 1, length = 8)\n\n            dat_obs.val.estimate .=\n                ease_between(old_estimate, new_df.estimate, update_ratio)\n            notify(dat_obs)\n            recordframe!(io)\n        end\n    end\nend;\nnothing #hide\n\n(Image: )","category":"section"},{"location":"generated/how_to/uncertain_topo/#Single-topoplot-with-easing-animation","page":"Uncertainty in topoplots","title":"Single topoplot with easing animation","text":"<details>\n<summary>Click to expand for supportive functions</summary>\n\n\"\"\"\nparam_bootstrap_means(mean_vec, se_vec; n_boot, rng)\n\nReturn (n_channels √ó n_boot) matrix of bootstrap mean vectors,\nsampling independently per channel: Œº + SE * randn().\n\"\"\"\nfunction param_bootstrap_means(mean_vec::AbstractVector, se_vec::AbstractVector;\n        n_boot::Int=10, rng=MersenneTwister(1))\n\n    T = float(promote_type(eltype(mean_vec), eltype(se_vec)))\n    Œº = convert(Vector{T}, mean_vec)\n    se = convert(Vector{T}, se_vec)\n    n_channels = length(Œº)\n\n    out = Matrix{T}(undef, n_channels, n_boot)\n    for i_boot in 1:n_boot\n        out[:, i_boot] = Œº .+ se .* randn(rng, T, n_channels)\n    end\n    return out\nend\n\n</details >\n\nse_vec = vec_uncert ./ sqrt(15) # 15 subject according to paper\nn_boot = 20\nboot_means = param_bootstrap_means(vec_estimate, se_vec; n_boot = n_boot, rng = rng)\n\nobs = Observable(boot_means[:, 1])\nf = Figure()\nplot_topoplot!(\n    f[1, 1],\n    obs;\n    positions = positions,\n    visual = (; contours = false),\n    axis = (; xlabel = \"Time [100 msec]\"),\n)\n\nrecord(f, \"bootstrap_single_topo.mp4\"; framerate = 12) do io\n    recordframe!(io)  # first frame (original)\n    for i_boot in 1:(n_boot - 1)          # number of bootstrap targets\n        new_v = boot_means[:, i_boot + 1]\n        old_v = copy(obs[])\n        for u in range(0, 1, length=10)   # easing steps\n            obs[] = ease_between(old_v, new_v, u)\n            recordframe!(io)\n        end\n    end\nend\n\n(Image: )\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/explanations/key_features/#features","page":"Key features","title":"Features of UnfoldMakie.jl","text":"Or why this package is cool and you should use it.\n\nFocused. UnfoldMakie.jl focuses exclusively on visualizing (r)ERPs, unlike other toolboxes such as EEGLAB, FieldTrip, Brainstorm, or MNE. This makes it easier to understand, use, and maintain the package in the future.\nCustomizable. The majority of EEG researchers perceive the flexibility of coding as the most important feature of the EEG toolbox. Consequently, users of UnfoldMakie.jl have great flexibility in customizing most aspects of the plots, such as colors, line styles, and axis decorations.\nCombining plots. The layout system for subplots in Makie.jl makes it easy to combine and align various plot types.\nFlexible mapping. With AlgebraOfGraphics.jl, it is easy to map conditions, groups, channels, or other features to a large variety of aesthetics like linestyle, color, marker, and others. It works similarly to the popular R package ggplot2.\nFlexible data input. All functions support basic Arrays and tidy DataFrames.\nFast. Julia and Makie.jl allow fast plotting of figures with very complex layouts. For example, it can plot one figure with 50 topoplots in 1.9 seconds (1.6 sec with DelaunayMesh interpolation), which is approximately 20 times faster compared to EEGLAB. (Although the Python-based MNE is faster by one second.) For more details, see this page.\nFaster updating. Makie.jl is incredibly fast at updating figures, which is beneficial for developing interactive tools and creating animations. UnfoldMakie.jl can create and save a topoplot gif file with 50 frames in 1.7 times less time than MNE (Table 2).\nInteractive. Several plots in our package have interactive features. They are supported by Observables.jl, which allows for fast data exchange and quick plot updating.\nScientific color maps. According to our previous study (Mikheev, 2024), 40% of EEG researchers are not aware of the issue of perceptually non-uniform color maps. UnfoldMakie.jl uses scientific color maps throughout.\nDocumented. There is extensive documentation with many usage examples and docstrings.\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/channel_image/#Channel-image","page":"Channel image","title":"Channel image","text":"Channel image is a plot type for visualizing EEG activity for all channels. It can fully represent time and channel dimensions using a heatmap. Y-axis represents all channels, x-axis represents time, while color represents voltage.","category":"section"},{"location":"generated/tutorials/channel_image/#Setup","page":"Channel image","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing CairoMakie\nusing UnfoldSim\nusing TopoPlots","category":"section"},{"location":"generated/tutorials/channel_image/#Plot-Channel-image","page":"Channel image","title":"Plot Channel image","text":"The following code will result in the default configuration.\n\ndat, pos = TopoPlots.example_data()\ndat = dat[:, :, 1]\npos = pos[1:30]\nlabels_30 = UnfoldMakie.example_montage(\"labels_30\");\n\n\nplot_channelimage(dat[1:30, :], pos, labels_30; axis = (; xlabel = \"Time [s]\"))","category":"section"},{"location":"generated/tutorials/channel_image/#Configurations-for-Channel-image","page":"Channel image","title":"Configurations for Channel image","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/channel_image/#UnfoldMakie.plot_channelimage","page":"Channel image","title":"UnfoldMakie.plot_channelimage","text":"plot_channelimage!(f::Union{GridPosition, GridLayout, Figure}, data::Union{DataFrame,AbstractMatrix}, positions::Vector{Point{2,Float32}}, ch_names::Vector{String}; kwargs...)\nplot_channelimage(data::Union{DataFrame, AbstractMatrix}, positions::Vector{Point{2,Float32}}, ch_names::Vector{String}; kwargs...)\n\nPlot a Channel image\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, AbstractMatrix}\n  DataFrame or Matrix with data.\n  Data should has a format of 1 row - 1 channel. \npositions::Vector{Point{2,Float32}}\n  A vector with EEG layout coordinates.\nch_names::Vector{String}\n  Vector with channel names.\ntimes::Vector = range(-0.3, 1.2, length = size(data, 2))\n  Time range on x-axis.\nsorting_variables::Vector = [:y, :x]\n  Method to sort channels on y-axis.\n  For instance, you can sort by channel positions on the scalp (x, y) or channel name. \nsorting_reverse::Vector = [:false, :false]\n Should sorting variables be reversed or not?\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", ylabel = \"Channels\", yticklabelsize = 14) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{String}(\"RdBu\"),) - use kwargs... of Makie.heatmap \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Channel image.\n\n\n\n\n\n","category":"function"},{"location":"generated/tutorials/circ_topo/#Circular-Topoplots","page":"Circular topoplots","title":"Circular Topoplots","text":"Circular topoplot series is a plot type for visualizing EEG activity in relation to some continous variable arranged on a circluar line. It can fully represent channel and channel location dimensions using contour lines. It can also partially represent the varaible dimension. Variable could be for instance saccadic amplitude or degrees of visual angle. Basically, it is a series of Topoplots arranged on a circle.","category":"section"},{"location":"generated/tutorials/circ_topo/#Setup","page":"Circular topoplots","title":"Setup","text":"Package loading\n\nusing UnfoldMakie\nusing CairoMakie\nusing TopoPlots # for example data\nusing Random\nusing DataFrames\n\nData generation Generate a Dataframe. We need to specify the Topoplot positions either via position, or via labels.\n\ndata, pos = TopoPlots.example_data();\ndat = data[:, 240, 1]\ndf = DataFrame(\n    :estimate => eachcol(Float64.(data[:, 100:40:300, 1])),\n    :circular_variable => [0, 50, 80, 120, 180, 210],\n    :time => 100:40:300,\n)\ndf = flatten(df, :estimate);\nnothing #hide","category":"section"},{"location":"generated/tutorials/circ_topo/#Plot-generations","page":"Circular topoplots","title":"Plot generations","text":"Note how the plots are located at the angles of the circular_variable.\n\nplot_circular_topoplots(\n    df;\n    positions = pos,\n    center_label = \"Relative angle [¬∞]\",\n    predictor = :circular_variable,\n)\n\nIf the bounding variable is not between 0 and 360, since we are using time, we must specify it.\n\nplot_circular_topoplots(\n    df;\n    positions = pos,\n    center_label = \"Time [s]\",\n    predictor = :time,\n    predictor_bounds = [80, 320],\n    colorbar = (; height = 350),\n)","category":"section"},{"location":"generated/tutorials/circ_topo/#Configurations-of-Circular-Topoplots","page":"Circular topoplots","title":"Configurations of Circular Topoplots","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/circ_topo/#UnfoldMakie.plot_circular_topoplots","page":"Circular topoplots","title":"UnfoldMakie.plot_circular_topoplots","text":"plot_circular_topoplots!(f, data::DataFrame; kwargs...)\n\nusing ColorSchemes: topo using ColorSchemes: topo using ColorSchemes: topo     plotcirculartopoplots(data::DataFrame; kwargs...)\n\nPlot a circular EEG topoplot.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\n\ndata::DataFrame\n  DataFrame with data keys (columns :y, :yhat, :estimate), and :position (columns :pos, :position, :positions).\n\nKeyword arguments (kwargs)\n\npredictor::Vector{Any} = :predictor\n  The circular predictor value, defines position of topoplot across the circle.   Mapped around predictor_bounds.\npredictor_bounds::Vector{Int64} = [0, 360]\n  The bounds of the predictor. Relevant for the axis labels.\npositions::Vector{Point{2, Float32}} = nothing\n  Positions of the plot_topoplot.\ncenter_label::String = \"\"\n  The text in the center of the cricle.\nplot_radius::String = 0.8\n  The radius of the circular topoplot series plot calucalted by formula: radius = (minwidth * plot_radius) / 2.\nlabels::Vector{String} = nothing\n  Labels for the plot_topoplots.\ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(0.2f0), height = Relative(0.2f0), aspect = 1)\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", aspect = 1) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = false, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label => 0)) - check this page \n\nmapping = (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = true, label_text = false, bounding_geometry = GeometryBasics.Circle) - use kwargs... of Topoplot.eeg_topoplot \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"Voltage [¬µV]\", colormap = Makie.Reverse{Symbol}(:RdBu)) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Circular topoplot series.\n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.RelativeAxis","page":"API: Utilities","title":"UnfoldMakie.RelativeAxis","text":"RelativeAxis(fig, p::NTuple{4, Float64}; kwargs...)\n\nReturns an Axis whose position is relative to a GridLayout element (via BBox) and not relative to the Scene. Default behavior is Axis(..., bbox = BBox()).\n\np::NTuple{4,Float64}: specify the position relative to the GridPosition   left:right; bottom:top, typical numbers between 0 and 1, e.g. (0.25, 0.75, 0.25, 0.75) would center an Axis inside this GridPosition.\nkwargs... - inserted into the axis.\nf = Figure()   ax = RelativeAxis(f[1, 2], (0.25, 0.75, 0.25, 0.75)# returns Axis centered within f[1, 2]\n\nReturn Value: Axis.\n\n\n\n\n\n","category":"type"},{"location":"helper/#UnfoldMakie.eeg_topoplot_series","page":"API: Utilities","title":"UnfoldMakie.eeg_topoplot_series","text":" eeg_topoplot_series(data::DataFrame,\n    fig,\n    data_inp::Union{<:Observable,<:AbstractMatrix};\n    layout = nothing,\n    topoplot_xlabels = nothing,\n    labels = nothing,\n    rasterize_heatmaps = true,\n    interactive_scatter = nothing,\n    highlight_scatter = false,\n    topo_axis = (;),\n    topo_attributes = (;),\n    positions,\n)\neeg_topoplot_series!(fig, data::DataFrame; kwargs..)\n\nPlot a series of topoplots.  The function takes the combinefun = mean over the :time column of data.\n\nfig \n  Figure object. \n\ndata::Union{<:Observable,<:AbstractMatrix}\n  Matrix with size = (nchannel, ntopoplots).\nlayout::Vector{Tuple{Int64, Int64}}\n  Vector of tuples with coordinates for each topoplot.\ntopoplot_xlabels::Vector{String}\n  Vector of xlables for each topoplot. \ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (aspect = 1, title = \"\", xgridvisible = false, xminorgridvisible = false, xminorticksvisible = false, xticksvisible = false, xticklabelsvisible = false, xlabelvisible = true, ygridvisible = false, yminorgridvisible = false, yminorticksvisible = false, yticksvisible = false, yticklabelsvisible = false, leftspinevisible = false, rightspinevisible = false, topspinevisible = false, bottomspinevisible = false, xpanlock = true, ypanlock = true, xzoomlock = true, yzoomlock = true, xrectzoom = false, yrectzoom = false)\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher().\npositions::Vector{Point{2, Float32}}\n  Channel positions. The list of x and y positions for all unique electrodes. \n\nReturn Value: Tuple{Figure, Vector{Any}}.\n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.config_kwargs!","page":"API: Utilities","title":"UnfoldMakie.config_kwargs!","text":"config_kwargs!(cfg::PlotConfig; kwargs...)\n\nTakes NamedTuple of Key => NamedTuple as kwargs and merges the fields with the defaults.\n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.eeg_array_to_dataframe","page":"API: Utilities","title":"UnfoldMakie.eeg_array_to_dataframe","text":"eeg_array_to_dataframe(data::AbstractMatrix, label_aliases::AbstractVector)\neeg_array_to_dataframe(data::AbstractVector, label_aliases::AbstractVector)\neeg_array_to_dataframe(data::Union{AbstractMatrix, AbstractVector{<:Number}})\n\nHelper function converting an array (Matrix or Vector) to a tidy DataFrame with columns :estimate, :time and :label (with aliases :color, :group, :channel).\n\nFormat of Arrays:\n- times x condition for plot_erp.\n- channels x time for plot_butterfly, plot_topoplotseries.\n- channels for plot_topoplot.\n Return Value: DataFrame.\n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.rel_to_abs_bbox","page":"API: Utilities","title":"UnfoldMakie.rel_to_abs_bbox","text":"rel_to_abs_bbox(org, rel)\n\nTakes a rectangle org consiting of coordinates of origins and applies the relative transformation tuple rel.\n\nReturn Value: Makie.BBox.\n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.to_positions","page":"API: Utilities","title":"UnfoldMakie.to_positions","text":"to_positions(x, y, z; sphere = [0, 0, 0.])\nto_positions(pos::AbstractMatrix; sphere = [0, 0, 0.])\n\nProjects 3D electrode positions to a 2D layout. Reimplementation of the MNE algorithm.\n\nAssumes size(pos) = (3, nChannels) when input is AbstractMatrix.\n\nTip: You can get positions directly from an MNE object after loading PyMNE and enabling the UnfoldMakie PyMNE extension.\n\nReturn Value: Vector{Point2{Float64}}. \n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.data_binning","page":"API: Utilities","title":"UnfoldMakie.data_binning","text":"data_binning(df; col_y = :erp, fun = mean, grouping = [])\n\nGroup DataFrame according to topoplot coordinates and apply aggregation function.\n\nArguments:\n\ndf::AbstractTable\n  Requires columns :cont_cuts, col_y (default :erp), and all columns in grouping (col_coord, row_coord, label);\ncol_y = :erp \n  The column to combine over (with fun);\nfun = mean()\n  Function to combine.\ngrouping = []\n  Vector of symbols or strings, columns to group by the data before aggregation. Values of nothing are ignored.\n\nReturn Value: DataFrame.\n\n\n\n\n\n","category":"function"},{"location":"helper/#UnfoldMakie.cart3d_to_spherical","page":"API: Utilities","title":"UnfoldMakie.cart3d_to_spherical","text":"cart3d_to_spherical(x, y, z)\n\nConvert x, y, z electrode positions on a scalp to spherical coordinate representation. \n\nReturn Value: Matrix.\n\n\n\n\n\n","category":"function"},{"location":"api/","page":"API: Functions","title":"API: Functions","text":"Internally, we use a PlotConfig struct to keep track of common plotting options, so that all functions have a similar API.","category":"section"},{"location":"api/#UnfoldMakie._normalize_nticks-Tuple{Any}","page":"API: Functions","title":"UnfoldMakie._normalize_nticks","text":"_normalize_nticks(nticks)\n\nNormalize nticks to (x::Int, y::Int). Accepts:\n\nInt ‚Üí same for both axes\n(Int, Int) ‚Üí (x, y)\n(x=Int, y=Int) ‚Üí as-is\n\nErrors on any other shape.\n\nReturn Value: NamedTuple{(:x, :y), Tuple{Int, Int}}.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.cart3d_to_spherical-Tuple{Any, Any, Any}","page":"API: Functions","title":"UnfoldMakie.cart3d_to_spherical","text":"cart3d_to_spherical(x, y, z)\n\nConvert x, y, z electrode positions on a scalp to spherical coordinate representation. \n\nReturn Value: Matrix.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.config_kwargs!-Tuple{PlotConfig}","page":"API: Functions","title":"UnfoldMakie.config_kwargs!","text":"config_kwargs!(cfg::PlotConfig; kwargs...)\n\nTakes NamedTuple of Key => NamedTuple as kwargs and merges the fields with the defaults.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.data_binning-Tuple{Any}","page":"API: Functions","title":"UnfoldMakie.data_binning","text":"data_binning(df; col_y = :erp, fun = mean, grouping = [])\n\nGroup DataFrame according to topoplot coordinates and apply aggregation function.\n\nArguments:\n\ndf::AbstractTable\n  Requires columns :cont_cuts, col_y (default :erp), and all columns in grouping (col_coord, row_coord, label);\ncol_y = :erp \n  The column to combine over (with fun);\nfun = mean()\n  Function to combine.\ngrouping = []\n  Vector of symbols or strings, columns to group by the data before aggregation. Values of nothing are ignored.\n\nReturn Value: DataFrame.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.default_tick_positions-Tuple{Any}","page":"API: Functions","title":"UnfoldMakie.default_tick_positions","text":"default_tick_positions(values; nticks::Int=5)\n\nCompute nticks evenly spaced tick positions spanning values. If all values are equal, widens the range by a tiny epsilon.\n\nReturn Value: Vector{Float64} of tick positions.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.eeg_array_to_dataframe-Tuple{Union{AbstractMatrix, AbstractVector{<:Number}}}","page":"API: Functions","title":"UnfoldMakie.eeg_array_to_dataframe","text":"eeg_array_to_dataframe(data::AbstractMatrix, label_aliases::AbstractVector)\neeg_array_to_dataframe(data::AbstractVector, label_aliases::AbstractVector)\neeg_array_to_dataframe(data::Union{AbstractMatrix, AbstractVector{<:Number}})\n\nHelper function converting an array (Matrix or Vector) to a tidy DataFrame with columns :estimate, :time and :label (with aliases :color, :group, :channel).\n\nFormat of Arrays:\n- times x condition for plot_erp.\n- channels x time for plot_butterfly, plot_topoplotseries.\n- channels for plot_topoplot.\n Return Value: DataFrame.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.eeg_topoplot_series-Tuple{Union{DataFrame, Observable, AbstractMatrix}}","page":"API: Functions","title":"UnfoldMakie.eeg_topoplot_series","text":" eeg_topoplot_series(data::DataFrame,\n    fig,\n    data_inp::Union{<:Observable,<:AbstractMatrix};\n    layout = nothing,\n    topoplot_xlabels = nothing,\n    labels = nothing,\n    rasterize_heatmaps = true,\n    interactive_scatter = nothing,\n    highlight_scatter = false,\n    topo_axis = (;),\n    topo_attributes = (;),\n    positions,\n)\neeg_topoplot_series!(fig, data::DataFrame; kwargs..)\n\nPlot a series of topoplots.  The function takes the combinefun = mean over the :time column of data.\n\nfig \n  Figure object. \n\ndata::Union{<:Observable,<:AbstractMatrix}\n  Matrix with size = (nchannel, ntopoplots).\nlayout::Vector{Tuple{Int64, Int64}}\n  Vector of tuples with coordinates for each topoplot.\ntopoplot_xlabels::Vector{String}\n  Vector of xlables for each topoplot. \ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (aspect = 1, title = \"\", xgridvisible = false, xminorgridvisible = false, xminorticksvisible = false, xticksvisible = false, xticklabelsvisible = false, xlabelvisible = true, ygridvisible = false, yminorgridvisible = false, yminorticksvisible = false, yticksvisible = false, yticklabelsvisible = false, leftspinevisible = false, rightspinevisible = false, topspinevisible = false, bottomspinevisible = false, xpanlock = true, ypanlock = true, xzoomlock = true, yzoomlock = true, xrectzoom = false, yrectzoom = false)\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher().\npositions::Vector{Point{2, Float32}}\n  Channel positions. The list of x and y positions for all unique electrodes. \n\nReturn Value: Tuple{Figure, Vector{Any}}.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_butterfly-Tuple{Union{AbstractDataFrame, AbstractMatrix}}","page":"API: Functions","title":"UnfoldMakie.plot_butterfly","text":"plot_butterfly(plot_data::Union{DataFrame, AbstractMatrix}; kwargs...)\nplot_butterfly(times::Vector, plot_data::Union{DataFrame, AbstractMatrix}; kwargs...)\nplot_butterfly!(f::Union{GridPosition, GridLayout, Figure}, plot_data::Union{DataFrame, AbstractMatrix}; kwargs...)\n\nPlot a Butterfly plot.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, AbstractMatrix}\n  Data for the ERP plot visualization.\nkwargs...\n  Additional styling behavior. \n  Often used as: plot_butterfly(df; visual = (; colormap = :romaO)).\n\nKeyword arguments (kwargs)\n\npositions::Array = [] \n  Adds a topoplot as an inset legend to the provided channel positions. Must be the same length as plot_data.     To change the colors of the channel lines use the topoposition_to_color function.\nnticks::Union{Int,Tuple{Int,Int}, NamedTuple{(:x,:y),Tuple{Int,Int}}} = 5\n  Set the number of tick positions (x,y). Acepts 3 types fo arguments: 6 (=both axes are 6), (5,7), or (x=5, y=7).    Controls positions only (use xtickformat/ytickformat for labels).\ntopolegend::Bool = true\n  Show an inlay topoplot with corresponding electrodes. Requires positions.\ntopopositions_to_color::x -> pos_to_color_RomaO(x)\n  Change the line colors.\ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(0.35f0), height = Relative(0.35f0), halign = 0.05, valign = 0.95, aspect = 1)\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: (head = (color = :black, linewidth = 1), label_scatter = (markersize = 10, strokewidth = 0.5), interpolation = TopoPlots.NullInterpolator())\nmapping = (;)\n  For highlighting specific channels.\n  Example: mapping = (; color = :highlight)), where :highlight is variable with appopriate mapping.\n\nReturn Value: Figure displaying Butterfly plot.\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time [s]\", ylabel = \"Voltage [¬µV]\", yticklabelsize = 14, xtickformat = UnfoldMakie.var\"#PlotConfig##0#PlotConfig##1\"(), ytickformat = UnfoldMakie.var\"#PlotConfig##2#PlotConfig##3\"(), xautolimitmargin = (0.01, 0.01)) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = false, use_colorbar = true, use_legend = true, hidespines = (:r, :t), hidedecorations = Dict{Symbol, Bool}(:label => 0, :ticks => 0, :ticklabels => 0)) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y), color = (:channel, :channels, :trial, :trials), positions = (:pos, :positions, :position, :topo_positions, :x, nothing), labels = (:labels, :label, :topoLabels, :sensor, nothing), group = (:channel,)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = nothing, color = nothing) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, framevisible = false, position = :right) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"\", flipaxis = true) - use kwargs... of  AlgebraOfGraphics.colorbar! \n\nsee also plot_erp\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_channelimage-Tuple{Union{DataFrame, AbstractMatrix}, Vector{Point{2, Float32}}, Vector{String}}","page":"API: Functions","title":"UnfoldMakie.plot_channelimage","text":"plot_channelimage!(f::Union{GridPosition, GridLayout, Figure}, data::Union{DataFrame,AbstractMatrix}, positions::Vector{Point{2,Float32}}, ch_names::Vector{String}; kwargs...)\nplot_channelimage(data::Union{DataFrame, AbstractMatrix}, positions::Vector{Point{2,Float32}}, ch_names::Vector{String}; kwargs...)\n\nPlot a Channel image\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, AbstractMatrix}\n  DataFrame or Matrix with data.\n  Data should has a format of 1 row - 1 channel. \npositions::Vector{Point{2,Float32}}\n  A vector with EEG layout coordinates.\nch_names::Vector{String}\n  Vector with channel names.\ntimes::Vector = range(-0.3, 1.2, length = size(data, 2))\n  Time range on x-axis.\nsorting_variables::Vector = [:y, :x]\n  Method to sort channels on y-axis.\n  For instance, you can sort by channel positions on the scalp (x, y) or channel name. \nsorting_reverse::Vector = [:false, :false]\n Should sorting variables be reversed or not?\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", ylabel = \"Channels\", yticklabelsize = 14) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{String}(\"RdBu\"),) - use kwargs... of Makie.heatmap \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Channel image.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_circular_topoplots-Tuple{DataFrame}","page":"API: Functions","title":"UnfoldMakie.plot_circular_topoplots","text":"plot_circular_topoplots!(f, data::DataFrame; kwargs...)\n\nusing ColorSchemes: topo using ColorSchemes: topo using ColorSchemes: topo     plotcirculartopoplots(data::DataFrame; kwargs...)\n\nPlot a circular EEG topoplot.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\n\ndata::DataFrame\n  DataFrame with data keys (columns :y, :yhat, :estimate), and :position (columns :pos, :position, :positions).\n\nKeyword arguments (kwargs)\n\npredictor::Vector{Any} = :predictor\n  The circular predictor value, defines position of topoplot across the circle.   Mapped around predictor_bounds.\npredictor_bounds::Vector{Int64} = [0, 360]\n  The bounds of the predictor. Relevant for the axis labels.\npositions::Vector{Point{2, Float32}} = nothing\n  Positions of the plot_topoplot.\ncenter_label::String = \"\"\n  The text in the center of the cricle.\nplot_radius::String = 0.8\n  The radius of the circular topoplot series plot calucalted by formula: radius = (minwidth * plot_radius) / 2.\nlabels::Vector{String} = nothing\n  Labels for the plot_topoplots.\ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(0.2f0), height = Relative(0.2f0), aspect = 1)\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", aspect = 1) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = false, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label => 0)) - check this page \n\nmapping = (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = true, label_text = false, bounding_geometry = GeometryBasics.Circle) - use kwargs... of Topoplot.eeg_topoplot \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"Voltage [¬µV]\", colormap = Makie.Reverse{Symbol}(:RdBu)) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Circular topoplot series.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_designmatrix-Tuple{Union{AbstractDesignMatrix, Vector{<:AbstractDesignMatrix}}}","page":"API: Functions","title":"UnfoldMakie.plot_designmatrix","text":"plot_designmatrix!(f::Union{GridPosition, GridLayout, Figure}, data::Unfold.DesignMatrix; kwargs...)\nplot_designmatrix(data::Unfold.DesignMatrix; kwargs...)\n\nPlot a designmatrix. \n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Unfold.DesignMatrix\n  Data for the plot visualization.\n\nKeyword arguments (kwargs)\n\nstandardize_data::Bool = false\n  Indicates whether the data is standardized by pointwise division of the data with its sampled standard deviation.\nsort_data::Bool = false\n  Indicates whether the data is sorted. It uses sortslices() of Base Julia. \nxticks::Num = nothing\n  Specifies the number of labels displayed on the x-axis.\nxticks = 0: No labels are displayed.\nxticks = 1: Only the first label is displayed.\nxticks = 2: The first and last labels are displayed.\n2 < xticks < number of labels: The labels are evenly distributed across the axis.\nxticks ‚â• number of labels: All labels are displayed.\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Conditions\", ylabel = \"Trials\", xticklabelrotation = 0.39) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :roma,) - use kwargs... of Makie.heatmap \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Design matrix. \n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_erp-Tuple{Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}}}","page":"API: Functions","title":"UnfoldMakie.plot_erp","text":"plot_erp!(f::Union{GridPosition, GridLayout, Figure}, plot_data::Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}}; kwargs...)\nplot_erp(times, plot_data::Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}}; kwargs...)\n\nPlot an ERP plot.   \n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}, Vector{Float32}}\n  Data for the ERP plot visualization.\nkwargs...\n  Additional styling behavior. \n  Often used as: plot_erp(df; mapping = (; color = :coefname, col = :conditionA)).\n\nKeyword arguments (kwargs)\n\nnticks::Union{Int,Tuple{Int,Int}, NamedTuple{(:x,:y),Tuple{Int,Int}}} = 5\n  Set the number of tick positions (x,y). Acepts 3 types fo arguments: 6 (=both axes are 6), (5,7), or (x=5, y=7).    Controls positions only (use xtickformat/ytickformat for labels).\nstderror::Bool = false\n  Add an error ribbon, with lower and upper limits based on the :stderror column.\nsignificance::DataFrame = nothing\n  Show significant time periods as horizontal bars.\n  Example: DataFrame(from = [0.1, 0.3], to = [0.5, 0.7], coefname = [\"(Intercept)\", \"condition: face\"]).\n  If coefname is not specified, the significance lines will be black.\nlayout.use_colorbar = true\n  Enable or disable colorbar.\n\nlayout.use_legend = true\n  Enable or disable legend.\n\nlayout.show_legend = true\n  Enable or disable legend and colorbar.\n\ntick_formatter::Function = default_ticks\n  Function used to compute automatic tick positions and labels for both axes.\n  Example: tick_formatter = v -> default_ticks(v; nticks = 6).\nmapping = (;)\n  Specify color, col (column), linestyle, group.\n  F.e. mapping = (; col = :group) will make a column for each group.\nvisual = (; color = Makie.wong_colors, colormap = :roma)\n  For categorical color use visual.color, for continuous - visual.colormap.\n\nsigifnicance_visual::Symbol = :vspan\n  How to display significance intervals. Options:\n  * :vspan ‚Äì draw vertical shaded spans (default);\n  * :lines ‚Äì draw horizontal bands below ERP lines;\n  * :both ‚Äì draw both.\n\nsignificance_lines::NamedTuple = (;)\n  Configure the appearance of significance lines:\n  * linewidth ‚Äì thickness of each line (not working);\n  * gap ‚Äì vertical space between stacked lines. Computed as stack_step = linewidth + gap;\n  * alpha ‚Äì transparency of the lines.\n  Defaults: (alpha = 1, linewidth = 0.005, gap = 0.1)\nsignificance_vspan::NamedTuple = (;)\n  Control appearance of vertical significance spans:\n  * alpha ‚Äì transparency of the shaded area.\n  Defaults: (alpha = 0.3,)\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time [s]\", ylabel = \"Voltage [¬µV]\", yticklabelsize = 14, xtickformat = UnfoldMakie.var\"#PlotConfig##4#PlotConfig##5\"(), ytickformat = UnfoldMakie.var\"#PlotConfig##6#PlotConfig##7\"()) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true, use_legend = true, hidespines = (:r, :t), hidedecorations = Dict{Symbol, Bool}(:grid => 1, :label => 0, :ticks => 0, :ticklabels => 0)) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y), color = (:color, :coefname, nothing)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :roma, color = ColorTypes.RGBA{Float32}[RGBA(0.0, 0.44705883, 0.69803923, 1.0), RGBA(0.9019608, 0.62352943, 0.0, 1.0), RGBA(0.0, 0.61960787, 0.4509804, 1.0), RGBA(0.8, 0.4745098, 0.654902, 1.0), RGBA(0.3372549, 0.7058824, 0.9137255, 1.0), RGBA(0.8352941, 0.36862746, 0.0, 1.0), RGBA(0.9411765, 0.89411765, 0.25882354, 1.0)]) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, framevisible = false, position = :right) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"\", flipaxis = true) - use kwargs... of  AlgebraOfGraphics.colorbar! \n\nReturn Value: Figure displaying the ERP plot.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_erpgrid-Tuple{Union{DataFrame, Matrix{<:Real}}, Vector, Vector{String}}","page":"API: Functions","title":"UnfoldMakie.plot_erpgrid","text":"plot_erpgrid(data::Union{Matrix{<:Real}, DataFrame}, positions::Vector; kwargs...)\nplot_erpgrid!(f::Union{GridPosition, GridLayout, Figure}, data::Union{Matrix{<:Real}, DataFrame}, positions::Vector, ch_names::Vector{String}; kwargs...)\n\nPlot an ERP image.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{Matrix{<:Real}, DataFrame}\n  Data for the plot visualization.\n  Data should has a format of 1 row - 1 channel. \npositions::Vector{Point{2,Float}} \n  Electrode positions.\nch_names::Vector{String}\n  Vector with channel names.\nhlines_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the hlines on all subaxes.\n  To see all options just type ?hlines in REPL.\n  Defaults: (color = :gray, linewidth = 0.5)\nvlines_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the vlines on all subaxes.\n  To see all options just type ?vlines in REPL.\n  Defaults: (color = :gray, linewidth = 0.5, ymin = 0.2, ymax = 0.8)\nlines_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the lines on all subaxes.\n  To see all options just type ?lines in REPL.\n  Defaults: (color = :deepskyblue3,)\nlabels_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the labels on all subaxes.\n  To see all options just type ?text in REPL.\n  Defaults: (color = :gray, fontsize = 12, align = (:left, :top), space = :relative)\nindicator_grid_axis::NamedTuple = (;)\n  Here you can change configurations of inidcator axis.\n  Defaults: (xlim = [-0.04, 1.0], ylim = [-0.04, 1.0], arrowsstart = Point{2, Float32}[[0.0, 0.0], [0.0, 0.0]], arrowsdir = Vec{2, Float32}[[0.0, 0.1], [0.1, 0.0]], arrowskwargs = (arrowsize = 10,), textxcoords = (0.02, 0), textxkwargs = (text = \"Time [s]\", align = (:left, :top), fontsize = 12), textycoords = (-0.008, 0.01), texty_kwargs = (text = \"Voltage [¬µV]\", align = (:left, :baseline), fontsize = 12, rotation = 1.5707963267948966))\nsubaxes::NamedTuple = (;)\n  Here you can flexibly change configurations of all subaxes. F.e. make them wider or shorter\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(0.1f0), height = Relative(0.1f0))\n\nKeyword arguments (kwargs)\n\ndrawlabels::Bool = false\n  Draw channels labels over each waveform. \ntimes::Vector = 1:size(data, 2)\n  Vector of size().\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (width = GridLayoutBase.Relative(1.05f0), height = GridLayoutBase.Relative(1.05f0)) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :roma,) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying ERP grid.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_erpimage-Tuple{Any}","page":"API: Functions","title":"UnfoldMakie.plot_erpimage","text":"plot_erpimage!(f::Union{GridPosition, GridLayout, Figure}, data::AbstractMatrix{Float64}; kwargs...)\nplot_erpimage!(f::Union{GridPosition, GridLayout, Figure}, data::Observable{<:AbstractMatrix}; kwargs...)\nplot_erpimage!(f::Union{GridPosition, GridLayout, Figure}, times::Observable{<:AbstractVector}, data::Observable{<:AbstractMatrix{<:Real}}; kwargs...)\n\nplot_erpimage(times::AbstractVector, data::Union{<:Observable{Matrix{<:Real}}, Matrix{<:Real}}; kwargs...)\nplot_erpimage(data::Matrix{Float64}; kwargs...)\n\nPlot an ERP image.\n\nArguments:\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, Vector{Float32}}\n  Data for the plot visualization.\n\nKeyword arguments (kwargs)\n\nerpblur::Number = 10\n  Number indicating how much blur is applied to the image. \n  Gaussian blur of the ImageFiltering module is used.\n  Non-Positive values deactivate the blur.\nsortvalues::Vector{Int64} = false\n  Parameter over which plot will be sorted. Using sortperm() of Base Julia.\n  sortperm() computes a permutation of the array's indices that puts the array in sorted order. \nsortindex::Vector{Int64} = nothing\n  Sorting over index values.\nmeanplot::bool = false\n  Add a line plot below the ERP image, showing the mean of the data.\nshow_sortval::bool = false\n  Add a plot on the right from ERP image, showing the distribution of the sorting data.\nsortval_xlabel::String = \"Sorting variable\"\n  If show_sortval = true controls xlabel.\naxis.ylabel::String = \"Trials\"\n  If sortvalues = true the default text will change to \"Sorted trials\", but it could be changed to any values specified manually.\nmeanplot_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of meanplot.\n  To see all options just type ?Axis in REPL.\n  Defaults: (height = 100, xlabel = \"Time\", xlabelpadding = 0, xautolimitmargin = (0, 0))\nsortplot_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of meanplot.\n  To see all options just type ?Axis in REPL.\n  Defaults: (ylabelvisible = true, yticklabelsvisible = false)\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", ylabel = \"Trials\") - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{String}(\"RdBu\"),) - use kwargs... of Makie.heatmap \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the ERP image. \n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_parallelcoordinates-Tuple{Union{DataFrame, AbstractMatrix}}","page":"API: Functions","title":"UnfoldMakie.plot_parallelcoordinates","text":"plot_parallelcoordinates(data::Union{DataFrame, AbstractMatrix}; kwargs...)\nplot_parallelcoordinates!(f::Union{GridPosition, GridLayout, Figure}, data::Union{DataFrame, AbstractMatrix}; kwargs)\n\nPlot a PCP (parallel coordinates plot).\nDimensions: conditions, channels, time, trials. \n\nArguments:\n\nf::Union{GridPosition, GridLayout, Figure}   Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, AbstractMatrix}\n  Data for the plot visualization.\n\nKeyword arguments (kwargs)\n\nnormalize::Symbol = nothing\n  If :minmax, normalize each axis to their respective min-max range.\nax_labels::Vector{String} = nothing\n  Specify axis labels. \n  Should be a vector of labels with length equal to the number of unique mapping.x values.\n  Example: ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"].\nax_ticklabels::Symbol = :outmost\n  Specify tick labels on axis.\n:all - show all labels on all axes.\n:left - show all labels on the left axis, but only min and max on others. \n:outmost - show labels on min and max of all other axes. \n:none - remove all labels. \nbend::Bool = false\n  Change straight lines between the axes to curved (\"bent\") lines using spline interpolation.\n  Note: While this makes the plot look cool, it is not generally recommended to bent the lines, as interpretation   suffers, and the resulting visualizations can be potentially missleading.\nvisual.alpha::Number = 0.5\n  Change of line transparency.\n\nDefining the axes\n\nmapping.x = :channel, mapping.y = :estimate.\n  Overwrite what should be on the x and the y axes.\nmapping.color = :colorcolumn \n  Split conditions by color. The default color is :black.\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Channels\", ylabel = \"Voltage [¬µV]\", title = \"\", xlabelpadding = 14, ylabelpadding = 26) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = :channel, y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = ColorTypes.RGBA{Float32}[RGBA(0.0, 0.44705883, 0.69803923, 1.0), RGBA(0.9019608, 0.62352943, 0.0, 1.0), RGBA(0.0, 0.61960787, 0.4509804, 1.0), RGBA(0.8, 0.4745098, 0.654902, 1.0), RGBA(0.3372549, 0.7058824, 0.9137255, 1.0), RGBA(0.8352941, 0.36862746, 0.0, 1.0), RGBA(0.9411765, 0.89411765, 0.25882354, 1.0)], color = :black, alpha = 0.3) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, title = \"Conditions\", merge = true, framevisible = false) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Parallel coordinates plot.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_splines-Tuple{UnfoldModel}","page":"API: Functions","title":"UnfoldMakie.plot_splines","text":"plot_splines(m::UnfoldModel; kwargs...)\nplot_splines!(f::Union{GridPosition, GridLayout, Figure}, m::UnfoldModel; kwargs...)\n\nVisualization of spline terms in an UnfoldModel. Two subplots are generated for each spline term:\n1) the basis function of the spline; 2) the density of the underlying covariate.\nMultiple spline terms are arranged across columns.\nDashed lines indicate spline knots.\n\nArguments:\n\nf::Union{GridPosition, GridLayout, Figure}   Figure, GridLayout, or GridPosition to draw the plot.\nm::UnfoldModel\n  UnfoldModel with splines.\nspline_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of spline subplots.\n  To see all options just type ?Axis in REPL.\n  Defaults: (ylabel = \"Spline value\", xlabelvisible = false, xticklabelsvisible = false, ylabelvisible = true)    \ndensity_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of density subplots.\n  To see all options just type ?Axis in REPL.\n  Defaults: (xautolimitmargin = (0, 0), ylabel = \"Density value\")\nsuperlabel_config::NamedTuple = (;)\n  Here you can flexibly change configurations of the Label on the top of the plot.\n  To see all options just type ?Label in REPL.\n  Defaults: (fontsize = 20, padding = (0, 0, 40, 0))\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = NamedTuple() - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :viridis,) - use kwargs... of Makie.series \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, title = \"Splines\", framevisible = false) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure with splines and their density for basis functions.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_topoplot-Tuple{Union{AbstractDataFrame, Observable{<:AbstractVector}, Observable{<:DataFrame}, AbstractVector}}","page":"API: Functions","title":"UnfoldMakie.plot_topoplot","text":"plot_topoplot!(f::Union{GridPosition, GridLayout, Figure}, data::Union{<:Observable{<:DataFrame},<:AbstractDataFrame,<:AbstractVector}; positions::Vector, labels = nothing, kwargs...)\nplot_topoplot(data::Union{<:Observable{<:DataFrame},<:AbstractDataFrame,<:AbstractVector}; position::Vector, labels = nothing, kwargs...)\n\nPlot a topoplot.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{<:Observable{<:DataFrame},<:AbstractDataFrame,<:AbstractVector} \n  Data for the plot visualization.\npositions::Vector{Point{2, Float32}}\n  Positions used if data is not a DataFrame. Positions are generated from labels if positions = nothing.\nlabels::Vector{String} = nothing\n  Labels used if data is not a DataFrame.\ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot axis.\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(1.0f0), height = Relative(1.0f0), halign = 0.05, valign = 0.95, aspect = DataAspect())\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", aspect = Makie.DataAspect()) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label => 0)) - check this page \n\nmapping = (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = true, label_text = false, bounding_geometry = GeometryBasics.Circle) - use kwargs... of Topoplot.eeg_topoplot \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nTo highlight some electrodes, you can use topo_attributes = (; label_scatter = (; ...))  where ... are the attributes for scatter! function.  For example, to change the marker size of all electrodes to 8,  use topo_attributes = (; label_scatter = (; markersize = 15)).  To set different sizes for each electrode, provide a vector of sizes with length equal  to the number of electrodes.\n\nReturn Value: Figure displaying the Topoplot.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.plot_topoplotseries-Tuple{Union{DataFrame, Observable{<:DataFrame}}}","page":"API: Functions","title":"UnfoldMakie.plot_topoplotseries","text":"plot_topoplotseries(f::Union{GridPosition, GridLayout, Figure}, data::Union{<:Observable{<:DataFrame},DataFrame}; kwargs...)\nplot_topoplotseries!(data::Union{<:Observable{<:DataFrame},DataFrame}; kwargs...)\n\nMultiple miniature topoplots in regular distances. \n\nArguments\n\nf::Union{GridPosition, GridLayout, GridLayoutBase.GridSubposition, Figure}\n  Figure, GridLayout, GridPosition, or GridLayoutBase.GridSubposition to draw the plot.\ndata::Union{<:Observable{<:DataFrame},DataFrame}\n  DataFrame with data or Observable DataFrame.\n  Requires a time column by default, but can be overridden by specifying mapping=(; x=:my_column) with any continuous or categorical column. \n\nKeyword arguments (kwargs)\n\nbin_width::Real = nothing\n  Number specifing the width of bin of continuous x-value in its units.\n\nbin_num::Real = nothing\n  Number of topoplots.\n  Either bin_width, or bin_num should be specified. Error if they are both specified\n  If mapping.col or mapping.row are categorical bin_width and bin_num stay as nothing.\ncombinefun::Function = mean\n  Specify how the samples within bin_width are summarised.\n  Example functions: mean, median, std. \nrasterize_heatmaps::Bool = true\n  Force rasterization of the plot heatmap when saving in svg format.\n  Except for the interpolated heatmap, all lines/points are vectors.\n  This is typically what you want, otherwise you get ~128x128 vectors per topoplot, which makes everything very slow.\ncol_labels::Bool, row_labels::Bool = true\n  Shows column and row labels in faceting mode. (not implemented)\npositions::Vector{Point{2, Float32}} = nothing\n  Specify channel positions. Requires the list of x and y positions for all unique electrodes.\nlabels::Vector{String} = nothing\n  Show labels for each electrode.\ninteractive_scatter = nothing\n  Enable interactive mode.\n  If you create obs_tuple = Observable((0, 0, 0)) and pass it into interactive_scatter you can update the observable tuple with the indices of the clicked topoplot markers.\n  (0, 0, 0) corresponds to the (row of topoplot layout, column of topoplot layout, electrode). \ntopo_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of topoplots.\n  To see all options just type ?Axis in REPL.\nmapping = (; col = :time, row = nothing, layout = nothing)\n  mapping.col - specify x-value, can be any continuous or categorical variable.\n  mapping.row - specify y-value, can be any continuous or categorical variable (not implemented yet).\n  mapping.layout - arranges topoplots by rows when equals :time.\n\ntopo_attributes::NamedTuple = (;)\n  Here you can flexibly change configurations of the topoplot interoplation.\n  To see all options just type ?Topoplot.topoplot in REPL.\n  Defaults: interp_resolution = (128, 128), interpolation = CloughTocher()\ntopolabels_rounding = (; sigdigits = 3)\n  Rounding of the topo_axis labels.\n  sigdigits - number of significant digits.\n  digits - number of digits after the decimal point.\n  Only one of sigdigits or digits should be provided.\n\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time windows\", aspect = Makie.DataAspect(), title = \"\", titlesize = 16, titlefont = :bold, ylabel = \"\", ylabelpadding = 25, xlabelpadding = 25, xpanlock = true, ypanlock = true, xzoomlock = true, yzoomlock = true, xrectzoom = false, yrectzoom = false) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true, hidespines = (), hidedecorations = Dict{Symbol, Bool}(:label => 0)) - check this page \n\nmapping = (x = nothing, y = (:estimate, :yhat, :y), positions = (:pos, :positions, :position, nothing), labels = (:labels, :label, :sensor, nothing), col = (:time,), row = (nothing,)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{Symbol}(:RdBu), contours = (color = :white, linewidth = 2), enlarge = 1, label_scatter = false, label_text = false, bounding_geometry = GeometryBasics.Circle, levels = nothing) - use kwargs... of Topoplot.eeg_topoplot \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Topoplot series.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.rel_to_abs_bbox-Tuple{Any, Any}","page":"API: Functions","title":"UnfoldMakie.rel_to_abs_bbox","text":"rel_to_abs_bbox(org, rel)\n\nTakes a rectangle org consiting of coordinates of origins and applies the relative transformation tuple rel.\n\nReturn Value: Makie.BBox.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.supportive_defaults-Tuple{Symbol}","page":"API: Functions","title":"UnfoldMakie.supportive_defaults","text":"supportive_defaults(cfg_symb::Symbol)\n\nDefault configurations for the supporting axis. Similar to PlotConfig, but these configurations are not shared by all plots.\nSuch supporting axes allow users to flexibly see defaults in docstrings and manipulate them using corresponding axes.\n\nFor developers: to make them updateable in the function, use update_axis. Return value: NamedTuple.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.to_positions-Tuple{AbstractMatrix}","page":"API: Functions","title":"UnfoldMakie.to_positions","text":"to_positions(x, y, z; sphere = [0, 0, 0.])\nto_positions(pos::AbstractMatrix; sphere = [0, 0, 0.])\n\nProjects 3D electrode positions to a 2D layout. Reimplementation of the MNE algorithm.\n\nAssumes size(pos) = (3, nChannels) when input is AbstractMatrix.\n\nTip: You can get positions directly from an MNE object after loading PyMNE and enabling the UnfoldMakie PyMNE extension.\n\nReturn Value: Vector{Point2{Float64}}. \n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.update_axis-Tuple{NamedTuple}","page":"API: Functions","title":"UnfoldMakie.update_axis","text":"update_axis(support_axis::NamedTuple; kwargs...)\n\nUpdate values of NamedTuple{key = value}.\nUsed for supportive axes to make users be able to flexibly change them.\n\n\n\n\n\n","category":"method"},{"location":"api/#UnfoldMakie.PlotConfig","page":"API: Functions","title":"UnfoldMakie.PlotConfig","text":"PlotConfig(<plotname>)\n\nContains several different fields that can modify various aspects of the plot.\n\n\n\n\n\n","category":"type"},{"location":"api/#UnfoldMakie.PCPTicks","page":"API: Functions","title":"UnfoldMakie.PCPTicks","text":"PCPTicks\n\nUsed to inject extrema ticks and round them if necessary.\n\n\n\n\n\n","category":"type"},{"location":"generated/tutorials/designmatrix/#Design-matrix","page":"Design matrix","title":"Design matrix","text":"Design matrix plot is a visualization type used to inspect the structure of predictors in EEG regression analysis. It fully represents the trials and predictors dimensions using a colored grid (heatmap). Each row corresponds to a trial, and each column to a predictor, with color intensity reflecting the predictor‚Äôs value.\n\nUnlike ERP or butterfly plots that focus on time and channel dimensions, the design matrix plot focuses on the underlying experimental design. It gives a compact, at-a-glance overview of how predictors vary across trials üß©.\n\nOptions like sort_data and standardize_data enhance interpretability by reorganizing trials or normalizing predictor scales. This type of plot is essential for checking data integrity before model fitting.","category":"section"},{"location":"generated/tutorials/designmatrix/#Setup","page":"Design matrix","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing DataFrames\nusing CairoMakie\n\nData\n\nuf = UnfoldMakie.example_data(\"UnfoldLinearModel\");\nnothing #hide","category":"section"},{"location":"generated/tutorials/designmatrix/#Plot-Design-Matrices","page":"Design matrix","title":"Plot Design Matrices","text":"The following code will result in the default configuration.\n\nplot_designmatrix(designmatrix(uf))\n\nTo make the design matrix easier to read, you may want to sort it using sort_data.\n\nplot_designmatrix(designmatrix(uf); sort_data = true)","category":"section"},{"location":"generated/tutorials/designmatrix/#Configurations-for-Design-matrix-plot","page":"Design matrix","title":"Configurations for Design matrix plot","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/designmatrix/#UnfoldMakie.plot_designmatrix","page":"Design matrix","title":"UnfoldMakie.plot_designmatrix","text":"plot_designmatrix!(f::Union{GridPosition, GridLayout, Figure}, data::Unfold.DesignMatrix; kwargs...)\nplot_designmatrix(data::Unfold.DesignMatrix; kwargs...)\n\nPlot a designmatrix. \n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Unfold.DesignMatrix\n  Data for the plot visualization.\n\nKeyword arguments (kwargs)\n\nstandardize_data::Bool = false\n  Indicates whether the data is standardized by pointwise division of the data with its sampled standard deviation.\nsort_data::Bool = false\n  Indicates whether the data is sorted. It uses sortslices() of Base Julia. \nxticks::Num = nothing\n  Specifies the number of labels displayed on the x-axis.\nxticks = 0: No labels are displayed.\nxticks = 1: Only the first label is displayed.\nxticks = 2: The first and last labels are displayed.\n2 < xticks < number of labels: The labels are evenly distributed across the axis.\nxticks ‚â• number of labels: All labels are displayed.\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Conditions\", ylabel = \"Trials\", xticklabelrotation = 0.39) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :roma,) - use kwargs... of Makie.heatmap \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, flipaxis = true, label = \"\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Design matrix. \n\n\n\n\n\n","category":"function"},{"location":"generated/tutorials/erp_grid/#ERP-grid","page":"ERP grid","title":"ERP grid","text":"ERP grid is a plot type for visualisation of Event-related potentials. It can fully represent time, channel, and layout (channel locations) dimensions using lines. It can also partially represent condition dimensions. Lines are displayed on a grid. The location of each axis represents the location of the electrode. This plot type is not as popular because it is too cluttered.","category":"section"},{"location":"generated/tutorials/erp_grid/#Setup","page":"ERP grid","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing CairoMakie\nusing UnfoldSim\nusing TopoPlots\n\nData\n\ndata, pos = TopoPlots.example_data()\ndata = data[:, :, 1]\nchannels_32, positions_32 = UnfoldMakie.example_montage(\"montage_32\")\nchannels_64, positions_64 = UnfoldMakie.example_montage(\"montage_64\")","category":"section"},{"location":"generated/tutorials/erp_grid/#Plot-ERP-grid","page":"ERP grid","title":"Plot ERP grid","text":"plot_erpgrid(\n    data,\n    pos;\n    indicator_grid_axis = (;\n        text_x_kwargs = (; text = \"s\"),\n        text_y_kwargs = (; text = \"¬µV\"),\n    ),\n)","category":"section"},{"location":"generated/tutorials/erp_grid/#Adding-labels","page":"ERP grid","title":"Adding labels","text":"By default labels are just numbers.\n\nplot_erpgrid(\n    data,\n    pos;\n    drawlabels = true,\n    indicator_grid_axis = (;\n        text_x_kwargs = (; text = \"s\"),\n        text_y_kwargs = (; text = \"¬µV\"),\n    ),\n)\n\nBut you can also use predefined vector of channel labels.\n\nplot_erpgrid(\n    data,\n    pos,\n    channels_64;\n    drawlabels = true,\n    indicator_grid_axis = (; xlabel = \"s\", ylabel = \"¬µV\"),\n)","category":"section"},{"location":"generated/tutorials/erp_grid/#Customizing-coordinates","page":"ERP grid","title":"Customizing coordinates","text":"You can adjust the coordinates of subplots to improve their alignment. One simple method is rounding the coordinates to specific intervals.\n\nExample: Rounding the y-coordinate by 3 precision digits.\n\npos_new = [Point2(p[1], round(p[2], digits = 3)) for p in positions_32]\nplot_erpgrid(\n    data[1:32, :],\n    pos_new,\n    channels_32;\n    drawlabels = true,\n    indicator_grid_axis = (;\n        text_x_kwargs = (; text = \"s\"),\n        text_y_kwargs = (; text = \"¬µV\"),\n    ),\n)\n\nTo manually adjust the position of a specific subplot, modify its coordinates using Point() with arithmetic operations.\n\nExample: Shifting the first subplot 0.1 units upward on the y-axis.\n\npos_new[31] = Point(pos_new[31][1] + 0.2, pos_new[31][2]) # P9\nplot_erpgrid(\n    data[1:32, :],\n    pos_new,\n    channels_32;\n    drawlabels = true,\n    indicator_grid_axis = (;\n        text_x_kwargs = (; text = \"s\"),\n        text_y_kwargs = (; text = \"¬µV\"),\n    ),\n)\n\nHint: If you need to generate simple montage coordinates and channel names check them out here","category":"section"},{"location":"generated/tutorials/erp_grid/#Customizing-coordinates-inidcator","page":"ERP grid","title":"Customizing coordinates inidcator","text":"plot_erpgrid(\n    data,\n    pos;\n    indicator_grid_axis = (;\n        arrows_start = [Point2f(0, 0.95), Point2f(0, 0.95)], # Top-left corner\n        arrows_dir = [Vec2f(0, -0.1), Vec2f(0.1, 0)], # Downward and right\n        text_x_coords = (0.004, 0.996), # Position for the x-axis label (to the left of the x-arrow)\n        text_y_coords = (-0.01, 0.85),  # Position for the y-axis label (above the y-arrow)\n        text_x_kwargs = (; text = \"everything\", color = :red),\n        text_y_kwargs = (; text = \"is possible\", color = :green),\n    ),\n)","category":"section"},{"location":"generated/tutorials/erp_grid/#Configurations-for-Channel-image","page":"ERP grid","title":"Configurations for Channel image","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/erp_grid/#UnfoldMakie.plot_erpgrid","page":"ERP grid","title":"UnfoldMakie.plot_erpgrid","text":"plot_erpgrid(data::Union{Matrix{<:Real}, DataFrame}, positions::Vector; kwargs...)\nplot_erpgrid!(f::Union{GridPosition, GridLayout, Figure}, data::Union{Matrix{<:Real}, DataFrame}, positions::Vector, ch_names::Vector{String}; kwargs...)\n\nPlot an ERP image.\n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{Matrix{<:Real}, DataFrame}\n  Data for the plot visualization.\n  Data should has a format of 1 row - 1 channel. \npositions::Vector{Point{2,Float}} \n  Electrode positions.\nch_names::Vector{String}\n  Vector with channel names.\nhlines_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the hlines on all subaxes.\n  To see all options just type ?hlines in REPL.\n  Defaults: (color = :gray, linewidth = 0.5)\nvlines_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the vlines on all subaxes.\n  To see all options just type ?vlines in REPL.\n  Defaults: (color = :gray, linewidth = 0.5, ymin = 0.2, ymax = 0.8)\nlines_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the lines on all subaxes.\n  To see all options just type ?lines in REPL.\n  Defaults: (color = :deepskyblue3,)\nlabels_grid_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of the labels on all subaxes.\n  To see all options just type ?text in REPL.\n  Defaults: (color = :gray, fontsize = 12, align = (:left, :top), space = :relative)\nindicator_grid_axis::NamedTuple = (;)\n  Here you can change configurations of inidcator axis.\n  Defaults: (xlim = [-0.04, 1.0], ylim = [-0.04, 1.0], arrowsstart = Point{2, Float32}[[0.0, 0.0], [0.0, 0.0]], arrowsdir = Vec{2, Float32}[[0.0, 0.1], [0.1, 0.0]], arrowskwargs = (arrowsize = 10,), textxcoords = (0.02, 0), textxkwargs = (text = \"Time [s]\", align = (:left, :top), fontsize = 12), textycoords = (-0.008, 0.01), texty_kwargs = (text = \"Voltage [¬µV]\", align = (:left, :baseline), fontsize = 12, rotation = 1.5707963267948966))\nsubaxes::NamedTuple = (;)\n  Here you can flexibly change configurations of all subaxes. F.e. make them wider or shorter\n  To see all options just type ?Axis in REPL.\n  Defaults: (width = Relative(0.1f0), height = Relative(0.1f0))\n\nKeyword arguments (kwargs)\n\ndrawlabels::Bool = false\n  Draw channels labels over each waveform. \ntimes::Vector = 1:size(data, 2)\n  Vector of size().\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (width = GridLayoutBase.Relative(1.05f0), height = GridLayoutBase.Relative(1.05f0)) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :roma,) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying ERP grid.\n\n\n\n\n\n","category":"function"},{"location":"generated/how_to/topo_labels/#topo_labels","page":"Channel labels","title":"Adding labels to topoplot channels","text":"using TopoPlots\nusing CairoMakie, MakieThemes\nusing UnfoldMakie, UnfoldSim\n\nYou need 3 vectors to add labels to topoplots: of channel labels, of channel positions, and of voltage estimates.\n\nOn the internet, you can find various standard montages with channel labels. For instance, see the labels and positions of standard10052D. You can find many others here. But make sure you also have the corresponding data for them!\n\nIn our case, we have predefined data with 227 channels:\n\ndf_toposeries, pos_toposeries, lab_toposeries = UnfoldMakie.example_data(\"bootstrap_toposeries\"; noiselevel = 7);\ndf_trial1_t50 = filter(row -> row.trial == 1 && row.time == 50, df_toposeries)\n\nplot_topoplot(\n    df_trial1_t50.estimate;\n    labels = lab_toposeries,\n    positions = pos_toposeries,\n    visual = (; label_text = true, enlarge = 0.5, label_scatter = false),\n    axis = (; xlabel = \"50 ms\", limits = ((0, 1), (0, 0.9))),\n)\n\nImagine we want only 64 channels. In that case, we need to find which of the 227 channels correspond to the 64 channels in the montage. For that, let's use the 64 channel names from the BioSemi montage (also predefined):\n\nl64, _ = example_montage(\"biosemi_64\")\n\nLet's extract these 64 labels from the full 227-channel dataset provided by the HArtMuT head model:\n\nhart = headmodel()\nfilter_idx = findall(l -> l in l64, hart.electrodes[\"label\"])\n\nlabels_64 = hart.electrodes[\"label\"][filter_idx]\nestimates_64 = df_trial1_t50.estimate[filter_idx]\npositions_64 =\n    hart.electrodes[\"pos\"] |>\n    x -> to_positions(x') |>\n    x -> [UnfoldMakie.Point2f(p[1] + 0.5, p[2] + 0.5) for p in x] |>\n    x -> x[filter_idx];\n\nplot_topoplot(\n    estimates_64;\n    labels = labels_64,\n    positions = positions_64,\n    visual = (; label_text = true),\n    axis = (; xlabel = \"50 ms\"),\n)\n\nLet's add some customizations:\n\nwith_theme(Theme(; fontsize = 18, fonts = (; regular = \"Ubuntu Mono\"))) do\n    plot_topoplot(\n        estimates_64;\n        labels = labels_64,\n        positions = positions_64,\n        visual = (; label_text = true, colormap = :diverging_tritanopic_cwr_75_98_c20_n256, contours = false),\n        axis = (; xlabel = \"50 ms\"),\n    )\nend\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/how_to/complex_figures/","page":"Complex figures","title":"Complex figures","text":"using Unfold: coefnames","category":"section"},{"location":"generated/how_to/complex_figures/#Complex-figures","page":"Complex figures","title":"Complex figures","text":"This section discusses how users can incorporate multiple plots into a single figure.","category":"section"},{"location":"generated/how_to/complex_figures/#Setup","page":"Complex figures","title":"Setup","text":"Library load\n\nusing UnfoldMakie;\nusing CairoMakie\nusing DataFramesMeta\nusing UnfoldSim\nusing Unfold\nusing MakieThemes\nusing TopoPlots;\nnothing #hide\n\nData input\n\n<details>\n<summary>Click to expand</summary>\n\ntopo_df, positions = UnfoldMakie.example_data(\"TopoPlots.jl\")\ntopo_array, _ = TopoPlots.example_data()\ntoposeries_df =\n    UnfoldMakie.eeg_array_to_dataframe(topo_array[:, :, 1], string.(1:length(positions)));\nlabels_30 = UnfoldMakie.example_montage(\"labels_30\");\n\nuf_deconv = UnfoldMakie.example_data(\"UnfoldLinearModelContinuousTime\")\nuf = UnfoldMakie.example_data(\"UnfoldLinearModel\");\nresults = coeftable(uf)\nuf_5chan = UnfoldMakie.example_data(\"UnfoldLinearModelMultiChannel\");\n\ndat_e, evts, times = UnfoldMakie.example_data(\"sort_data\")\nd_singletrial, _ = UnfoldSim.predef_eeg(; return_epoched = true);\n\nm = UnfoldMakie.example_data(\"UnfoldLinearModel\");\nresults = coeftable(m);\nresults.coefname =\n    replace(results.coefname, \"condition: face\" => \"face\", \"(Intercept)\" => \"car\");\nresults = filter(row -> row.coefname != \"continuous\", results);\n\ndf_circ = DataFrame(\n    :estimate => eachcol(Float64.(topo_array[:, 100:40:300, 1])),\n    :circular_variable => [0, 50, 80, 120, 180, 210],\n    :time => 100:40:300,\n);\ndf_circ = flatten(df_circ, :estimate);\nnothing #hide\n\n</details >","category":"section"},{"location":"generated/how_to/complex_figures/#Basic-complex-figure","page":"Complex figures","title":"Basic complex figure","text":"By using the !-version of the plotting function and inserting a grid position instead of an entire figure, we can create complex plot that combines several figures. We will start by creating a figure with Makie.Figure.\n\nNow any plot can be added to f by placing a grid position, such as f[1, 1]. Also we used a specified theme fresh.\n\nf = Figure(size = (750, 500))\nwith_theme(theme_ggthemr(:fresh)) do\n    plot_erp!(\n        f[1, 1],\n        coeftable(uf_deconv);\n        mapping = (; color = :coefname => \"Conditions\"),\n    )\n    plot_erp!(\n        f[1, 2],\n        effects(Dict(:condition => [\"car\", \"face\"]), uf_deconv),\n        mapping = (; y = :yhat, color = :condition => \"Conditions\"),\n    )\n    plot_butterfly!(f[2, 1:2], topo_df; positions = positions,\n        topo_attributes = (; label_scatter = (; markersize = 5)),\n        topo_axis = (; height = Relative(0.5), width = Relative(0.5)))\nend\nf","category":"section"},{"location":"generated/how_to/complex_figures/#A-very-complex-figure","page":"Complex figures","title":"A very complex figure","text":"We can create a large figure with any type of plot using predefined data.\n\nWith so many plots at once, it's better to set a fixed resolution in your image to arrange the plots evenly.\n\n<details>\n<summary>Click to expand</summary>\n\nbegin\n    f = Figure(size = (2000, 2000))\n\n    plot_butterfly!(f[1, 1:3], topo_df; positions = positions)\n\n    pvals = DataFrame(\n        from = [0.1, 0.15],\n        to = [0.2, 0.5], # if coefname not specified, line should be black\n        coefname = [\"(Intercept)\", \"category: face\"],\n    )\n    plot_erp!(f[2, 1:2], results, significance = pvals, stderror = true)\n\n    plot_designmatrix!(f[2, 3], designmatrix(uf))\n\n    plot_topoplot!(f[3, 1], topo_array[:, 150, 1]; positions = positions)\n    plot_topoplotseries!(\n        f[4, 1:3],\n        topo_df;\n        bin_width = 0.1,\n        positions = positions,\n        mapping = (; label = :channel),\n    )\n\n    res_effects = effects(Dict(:continuous => -5:0.5:5), uf_deconv)\n\n    plot_erp!(\n        f[2, 4:5],\n        res_effects;\n        mapping = (; y = :yhat, color = :continuous, group = :continuous => nonnumeric),\n        legend = (; nbanks = 2),\n    )\n\n    plot_parallelcoordinates(f[3, 2:3], uf_5chan; mapping = (; color = :coefname))\n\n    plot_erpimage!(f[1, 4:5], times, d_singletrial)\n    plot_circular_topoplots!(\n        f[3:4, 4:5],\n        topo_df[in.(topo_df.time, Ref(-0.3:0.1:0.5)), :];\n        positions = positions,\n        predictor = :time,\n        predictor_bounds = [-0.3, 0.5],\n    )\nend\n\n</details >\n\nf","category":"section"},{"location":"generated/how_to/complex_figures/#Complex-figure-in-two-columns-and-with-background-color","page":"Complex figures","title":"Complex figure in two columns and with background color","text":"<details>\n<summary>Click to expand</summary>\n\nfunction complex_figure3(\n    topo_df,\n    topo_array,\n    positions,\n    toposeries_df,\n    labels_30,\n    results,\n    df_circ,\n    dat_e,\n    evts,\n    times,\n)\n    f = Figure(size = (1200, 1700))\n    (ga, gc, ge, gg, gi) = (f[1, 1], f[2, 1], f[3, 1], f[4, 1], f[5:6, 1])\n    (gb, gd, gf, gh, gj) = (f[1, 2], f[2, 2], f[3, 2], f[4, 2], f[5:6, 2])\n\n    plot_erp!(\n        ga,\n        results;\n        :stderror => true,\n        mapping = (; color = :coefname => \"Conditions\"),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\", xlabel = \"Time [ms]\"),\n    )\n    hlines!(0, color = :gray, linewidth = 1)\n    vlines!(0, color = :gray, linewidth = 1)\n    plot_butterfly!(\n        gb,\n        topo_df;\n        positions = positions,\n        topo_axis = (; height = Relative(0.4), width = Relative(0.4)),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\", xlabel = \"Time [ms]\"),\n    )\n    hlines!(0, color = :gray, linewidth = 1)\n    vlines!(0, color = :gray, linewidth = 1)\n    plot_topoplot!(\n        gc,\n        topo_array[:, 340, 1];\n        positions = positions,\n        topo_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        axis = (; xlabel = \"[340 ms]\"),\n    )\n\n    plot_topoplotseries!(\n        gd,\n        toposeries_df;\n        bin_width = 80,\n        positions = positions,\n        visual = (label_scatter = false, contours = false),\n        layout = (; use_colorbar = true),\n        topo_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\", xlabel = \"Time [ms]\"),\n    )\n\n    plot_erpgrid!(\n        ge,\n        topo_array[:, :, 1],\n        positions;\n        indicator_grid_axis = (;\n            ylim = [-0.05, 0.6], xlim = [-0.04, 1], text_x_kwargs = (; text = \"s\"),\n            text_y_kwargs = (; text = \"¬µV\"),\n        ),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\",),\n    )\n\n    plot_erpimage!(\n        gf,\n        times,\n        dat_e;\n        sortvalues = evts.Œîlatency,\n        axis = (; xlabel = \"Time [ms]\"),\n    )\n    m1 = UnfoldMakie.example_data(\"UnfoldLinearModelwith1Spline\")\n    plot_splines!(\n        gg,\n        m1;\n        spline_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        density_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n    )\n\n    topo_df.coefname .= \"B\" # create a second category\n    topo_df.estimate .+= rand(length(topo_df.estimate)) * 0.1\n    plot_parallelcoordinates(\n        gh,\n        subset(topo_df, :channel => x -> x .< 8, :time => x -> x .< 0);\n        mapping = (; color = :coefname),\n        normalize = :minmax,\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\", \"C5\", \"P3\", \"P7\"],\n        axis = (; backgroundcolor = colorant\"#F4F3EF\", ylabel = \"Time [ms]\"),\n    )\n\n    plot_circular_topoplots!(\n        gi,\n        df_circ;\n        positions = positions,\n        center_label = \"Time [s]\",\n        predictor = :time,\n        topo_attributes = (; label_scatter = false,),\n        topo_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        predictor_bounds = [80, 320],\n        colorbar = (; height = 180),\n    )\n    plot_channelimage!(\n        gj,\n        topo_array[1:30, :, 1],\n        positions[1:30],\n        labels_30;\n        axis = (; xlabel = \"Time [ms]\"),\n    )\n\n    for (label, layout) in\n        zip(\n        [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\"],\n        [ga, gb, gc, gd, ge, gf, gg, gh, gi, gj],\n    )\n        Label(\n            layout[1, 1, TopLeft()],\n            label,\n            fontsize = 26,\n            font = :bold,\n            padding = (20, 20, 22, 0),\n            halign = :right,\n        )\n    end\n    f\nend\n\n</details >\n\nwith_theme(Theme(; backgroundcolor = colorant\"#F4F3EF\")) do\n    complex_figure3(\n        topo_df,\n        topo_array,\n        positions,\n        toposeries_df,\n        labels_30,\n        results,\n        df_circ,\n        dat_e,\n        evts,\n        times,\n    )\nend","category":"section"},{"location":"generated/how_to/complex_figures/#Complex-figure-in-four-columns-and-with-background-color","page":"Complex figures","title":"Complex figure in four columns and with background color","text":"<details>\n<summary>Click to expand</summary>\n\nresults = coeftable(m)\nresults.coefname =\n    replace(results.coefname, \"condition: face\" => \"face\", \"(Intercept)\" => \"car\")\nresults = filter(row -> row.coefname != \"continuous\", results)\n\nfunction complex_figure4(\n    topo_df,\n    topo_array,\n    positions,\n    toposeries_df,\n    labels_30,\n    results,\n    df_circ,\n    dat_e,\n    evts,\n    times,\n)\n    f = Figure(size = (1800, 1000))\n\n    (ga, gb, gc, gd) = (f[1, 1], f[1, 2], f[1, 3], f[1, 4])\n    (ge, gf, gg, gh) = (f[2, 1], f[2, 2], f[2, 3], f[2, 4])\n\n    plot_erp!(\n        ga,\n        results;\n        :stderror => true,\n        mapping = (; color = :coefname => \"Conditions:\"),\n        legend = (;\n            orientation = :horizontal,\n            titleposition = :left,\n            position = :bottom,\n            labelsize = 18,\n            titlesize = 20,\n            nbanks = 2,\n        ),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\", xlabel = \"Time [ms]\", width = 350,\n            xlabelsize = 24, ylabelsize = 24, xticklabelsize = 18, yticklabelsize = 18),\n    )\n    hlines!(0, color = :gray, linewidth = 1)\n    vlines!(0, color = :gray, linewidth = 1)\n\n    plot_butterfly!(\n        gb,\n        topo_df;\n        positions = positions,\n        topo_axis = (; height = Relative(0.4), width = Relative(0.4)),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\",\n            xlabel = \"Time [ms]\", xlabelsize = 24, ylabelsize = 24, xticklabelsize = 18,\n            yticklabelsize = 18),\n    )\n    hlines!(0, color = :gray, linewidth = 1)\n    vlines!(0, color = :gray, linewidth = 1)\n\n    plot_topoplot!(\n        ge,\n        topo_array[:, 340, 1];\n        positions = positions,\n        topo_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        axis = (;\n            xlabel = \"[340 ms]\",\n            backgroundcolor = colorant\"#F4F3EF\",\n            xlabelsize = 24,\n            ylabelsize = 24,\n        ),\n        colorbar = (; vertical = false, width = 180, labelsize = 24, ticklabelsize = 18),\n        visual = (; contours = false),\n    )\n\n    plot_topoplotseries!(\n        gf,\n        toposeries_df;\n        bin_width = 80,\n        nrows = 3,\n        positions = positions,\n        visual = (label_scatter = false, contours = false),\n        layout = (; use_colorbar = true),\n        topo_axis = (; backgroundcolor = colorant\"#F4F3EF\", xlabelsize = 18),\n        axis = (;\n            xlabelpadding = 70,\n            backgroundcolor = colorant\"#F4F3EF\",\n            xlabel = \"        Time [ms]\",\n            xlabelsize = 24,\n            ylabelsize = 24,\n        ),\n        colorbar = (; height = 180, labelsize = 24, ticklabelsize = 18),\n    )\n\n    plot_erpgrid!(\n        gc,\n        topo_array[:, :, 1],\n        positions;\n        indicator_grid_axis = (;\n            ylim = [-0.05, 0.6], xlim = [-0.07, 1],\n            text_x_kwargs = (; text = \"s\", fontsize = 24),\n            text_y_kwargs = (; text = \"¬µV\", fontsize = 24),\n        ),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\",),\n        colorbar = (; height = 180, labelsize = 24, ticklabelsize = 18),\n    )\n\n    plot_erpimage!(\n        gd,\n        times,\n        dat_e;\n        sortvalues = evts.Œîlatency,\n        axis = (;\n            xlabel = \"Time [ms]\",\n            xlabelsize = 24,\n            ylabelsize = 24,\n            xticklabelsize = 18,\n            yticklabelsize = 18,\n        ),\n        colorbar = (; height = 180, labelsize = 24, ticklabelsize = 18),\n    )\n\n    plot_circular_topoplots!(\n        gg,\n        df_circ;\n        positions = positions,\n        center_label = \"Time [ms]\",\n        predictor = :time,\n        topo_attributes = (; label_scatter = false, contours = false),\n        topo_axis = (; backgroundcolor = colorant\"#F4F3EF\"),\n        axis = (; backgroundcolor = colorant\"#F4F3EF\", xlabelsize = 24, ylabelsize = 24),\n        predictor_bounds = [80, 320],\n        colorbar = (; height = 180, labelsize = 24, ticklabelsize = 18),\n    )\n    plot_channelimage!(\n        gh,\n        topo_array[1:30, :, 1],\n        positions[1:30],\n        labels_30;\n        axis = (;\n            xlabel = \"Time [ms]\",\n            xlabelsize = 24,\n            ylabelsize = 24,\n            xticklabelsize = 18,\n            yticklabelsize = 18,\n        ),\n        colorbar = (; height = 180, labelsize = 24, ticklabelsize = 18),\n    )\n\n    for (label, layout) in\n        zip(\n        [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\"],\n        [ga, gb, gc, gd, ge, gf, gg, gh],\n    )\n        Label(\n            layout[1, 1, TopLeft()],\n            label,\n            fontsize = 26,\n            font = :bold,\n            padding = (20, 20, 22, 0),\n            halign = :right,\n        )\n    end\n    f\nend\n\n</details >\n\nf = with_theme(Theme(; backgroundcolor = colorant\"#F4F3EF\")) do\n    complex_figure4(\n        topo_df,\n        topo_array,\n        positions,\n        toposeries_df,\n        labels_30,\n        results,\n        df_circ,\n        dat_e,\n        evts,\n        times,\n    )\nend\n\n\n#save(\"complex_figure4.png\", f)\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/erpimage/#ERP-image","page":"ERP image","title":"ERP image","text":"ERP image is a plot type for visualizing EEG activity for all trials. It can fully represent time and trial dimensions using a heatmap. Y-axis represents all trials, x-axis represents time, while color represents voltage. The ERP image can also be sorted by specific experimental variables, which helps to reveal important correlations.","category":"section"},{"location":"generated/tutorials/erpimage/#Setup","page":"ERP image","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing CairoMakie\nusing UnfoldSim\nusing Statistics\n\nData input\n\ndat, evts = UnfoldSim.predef_eeg(; noiselevel = 10, return_epoched = true)","category":"section"},{"location":"generated/tutorials/erpimage/#Plot-ERP-image","page":"ERP image","title":"Plot ERP image","text":"plot_erpimage(dat, axis = (; xlabel = \"Time [s]\"))","category":"section"},{"location":"generated/tutorials/erpimage/#Sorted-ERP-image","page":"ERP image","title":"Sorted ERP image","text":"Generate the data and specify the necessary sorting parameter.\n\nsortvalues::Vector{Int64} = false   Parameter over which plot will be sorted. Using sortperm() of Base Julia.   sortperm() computes a permutation of the array's indices that puts the array in sorted order.\n\ndat_e, evts, times = UnfoldMakie.example_data(\"sort_data\")\ndat_norm = dat_e[:, :] .- mean(dat_e, dims = 2) # normalisation\nplot_erpimage(times, dat_norm; sortvalues = evts.Œîlatency, axis = (; xlabel = \"Time [s]\"))\n\nTo see the effect of sorting and normalization, also check this figure.\n\nf = Figure()\nplot_erpimage!(f[1, 1], times, dat_e; axis = (; xlabel = \"\"), colorbar = (; label = \"\"))\nplot_erpimage!(\n    f[2, 1],\n    times,\n    dat_e;\n    sortvalues = evts.Œîlatency,\n    axis = (; xlabel = \"Time [s]\"),\n    colorbar = (; label = \"\"),\n)\nplot_erpimage!(f[1, 2], times, dat_norm; axis = (; ylabel = \"\", xlabel = \"\"))\nplot_erpimage!(\n    f[2, 2],\n    times,\n    dat_norm;\n    sortvalues = evts.Œîlatency,\n    axis = (; ylabel = \"\", xlabel = \"Time [s]\"),\n)\nf","category":"section"},{"location":"generated/tutorials/erpimage/#Additional-features","page":"ERP image","title":"Additional features","text":"Since ERP images use a Matrix as an input, the library does not need any informations about the mapping.\n\nerpblur::Number = 10   Number indicating how much blur is applied to the image.   Gaussian blur of the ImageFiltering module is used.\nmeanplot::bool = false   Indicating whether the plot should add a line plot below the ERP image, showing the mean of the data.\n\nExample of mean plot\n\nplot_erpimage(\n    dat;\n    meanplot = true,\n    colorbar = (; label = \"Voltage [¬µV]\",),\n    visual = (; colormap = :viridis),\n    meanplot_axis = (; xlabel = \"Time [s]\"),\n)\n\nExample of mean plot and plot of sorted values\n\nplot_erpimage(\n    times,\n    dat_e;\n    sortvalues = evts.Œîlatency,\n    meanplot = true,\n    show_sortval = true,\n    meanplot_axis = (; xlabel = \"Time [s]\"),\n)","category":"section"},{"location":"generated/tutorials/erpimage/#Configurations-for-ERP-image","page":"ERP image","title":"Configurations for ERP image","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/erpimage/#UnfoldMakie.plot_erpimage","page":"ERP image","title":"UnfoldMakie.plot_erpimage","text":"plot_erpimage!(f::Union{GridPosition, GridLayout, Figure}, data::AbstractMatrix{Float64}; kwargs...)\nplot_erpimage!(f::Union{GridPosition, GridLayout, Figure}, data::Observable{<:AbstractMatrix}; kwargs...)\nplot_erpimage!(f::Union{GridPosition, GridLayout, Figure}, times::Observable{<:AbstractVector}, data::Observable{<:AbstractMatrix{<:Real}}; kwargs...)\n\nplot_erpimage(times::AbstractVector, data::Union{<:Observable{Matrix{<:Real}}, Matrix{<:Real}}; kwargs...)\nplot_erpimage(data::Matrix{Float64}; kwargs...)\n\nPlot an ERP image.\n\nArguments:\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, Vector{Float32}}\n  Data for the plot visualization.\n\nKeyword arguments (kwargs)\n\nerpblur::Number = 10\n  Number indicating how much blur is applied to the image. \n  Gaussian blur of the ImageFiltering module is used.\n  Non-Positive values deactivate the blur.\nsortvalues::Vector{Int64} = false\n  Parameter over which plot will be sorted. Using sortperm() of Base Julia.\n  sortperm() computes a permutation of the array's indices that puts the array in sorted order. \nsortindex::Vector{Int64} = nothing\n  Sorting over index values.\nmeanplot::bool = false\n  Add a line plot below the ERP image, showing the mean of the data.\nshow_sortval::bool = false\n  Add a plot on the right from ERP image, showing the distribution of the sorting data.\nsortval_xlabel::String = \"Sorting variable\"\n  If show_sortval = true controls xlabel.\naxis.ylabel::String = \"Trials\"\n  If sortvalues = true the default text will change to \"Sorted trials\", but it could be changed to any values specified manually.\nmeanplot_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of meanplot.\n  To see all options just type ?Axis in REPL.\n  Defaults: (height = 100, xlabel = \"Time\", xlabelpadding = 0, xautolimitmargin = (0, 0))\nsortplot_axis::NamedTuple = (;)\n  Here you can flexibly change configurations of meanplot.\n  To see all options just type ?Axis in REPL.\n  Defaults: (ylabelvisible = true, yticklabelsvisible = false)\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time\", ylabel = \"Trials\") - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = Makie.Reverse{String}(\"RdBu\"),) - use kwargs... of Makie.heatmap \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"Voltage [¬µV]\") - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the ERP image. \n\n\n\n\n\n","category":"function"},{"location":"generated/tutorials/erp/#erp_vis","page":"ERP plot","title":"ERP plot","text":"ERP plot is plot type for visualisation of Event-related potentials and also regression-ERPs. It can fully represent such data features as time and experimental conditions using lines. Its key feature is the ability to display not only the ERPs themselves but also how they vary as a function of categorical or continuous predictors.","category":"section"},{"location":"generated/tutorials/erp/#Setup","page":"ERP plot","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing DataFrames\nusing CairoMakie\nusing DataFramesMeta\nusing UnfoldSim\n\nData generation\n\nLet's generate some data. We'll fit a model with a 2 level categorical predictor and a continuous predictor with interaction.\n\nerp_matrix, evts = UnfoldSim.predef_eeg(; noiselevel = 12, return_epoched = true)\nerp_matrix = reshape(erp_matrix, (1, size(erp_matrix)...))\nf = @formula 0 ~ 1 + condition + continuous\nse_solver = (x, y) -> Unfold.solver_default(x, y, stderror = true);\n\nm = fit(\n    UnfoldModel,\n    Dict(Any => (f, range(0, step = 1 / 100, length = size(erp_matrix, 2)))),\n    evts,\n    erp_matrix,\n    solver = se_solver,\n);\nresults = coeftable(m)\nres_effects = effects(Dict(:continuous => -5:0.5:5), m);\nnothing #hide","category":"section"},{"location":"generated/tutorials/erp/#Figure-plotting","page":"ERP plot","title":"Figure plotting","text":"This figure shows the rERP coeffiecients. The \"Intercept\" reflects the reference category, e.g. the ERP of a \"car\". The condition \"face\" reflects the difference to the intercept when a face is shown, and the continuous predictor reflects the slope associated with the linear effect of continuous.\n\nplot_erp(results)\n\nTo change legend title use mapping.color:\n\nplot_erp(\n    results,\n    mapping = (; color = :coefname => \"Conditions\"),\n    axis = (; xlabel = \"Time [s]\"),\n)","category":"section"},{"location":"generated/tutorials/erp/#Additional-features","page":"ERP plot","title":"Additional features","text":"","category":"section"},{"location":"generated/tutorials/erp/#Effect-plot","page":"ERP plot","title":"Effect plot","text":"Effect plot shows how the ERP is affected by variation of some variable (here: :continuous).\n\nplot_erp(\n    res_effects;\n    mapping = (; y = :yhat, color = :continuous, group = :continuous),\n    layout = (; use_colorbar = true),\n    axis = (; xlabel = \"Time [s]\"),\n)","category":"section"},{"location":"generated/tutorials/erp/#Significance-Indicators","page":"ERP plot","title":"Significance Indicators","text":"Significance indicators visually highlight time intervals where model effects (e.g., regression coefficients) are statistically significant.\n\nIndicators are specified via a significance DataFrame with at least:\n\nfrom and to: the time interval to annotate (in seconds or samples)\noptionally coefname: to label and color different effects\n\nThe display is controlled using sigifnicance_visual, with options:\n\n:lines ‚Äî draw horizontal bars below the ERP curve\n:vspan ‚Äî draw vertical shaded spans over the time axis\n:both ‚Äî show both\n:none ‚Äî disable significance indicators entirely\n\nThese visual indicators support interpretation of when and where effects occur.\n\nBy default, significance is shown as vertical shaded spans.\n\nm = UnfoldMakie.example_data(\"UnfoldLinearModel\")\nresults = coeftable(m)\nsignificancevalues = DataFrame(\n    from = [0.01, 0.25],\n    to = [0.2, 0.29],\n    coefname = [\"(Intercept)\", \"condition: face\"], # if coefname not specified, line should be black\n)\nplot_erp(\n    results;\n    :significance => significancevalues,\n    mapping = (; color = :coefname => \"Conditions\"),\n    axis = (; xlabel = \"Time [s]\"),\n)\n\nThis version shows both horizontal bands and vertical spans\n\nAdditional styling is applied:\n\nVertical spans: lower alpha (transparency)\nHorizontal bands: increased gap between stacked bands\n\nplot_erp(\n    results;\n    significance = significancevalues,\n    sigifnicance_visual = :both,\n    significance_vspan = (; alpha = 0.2),\n    significance_lines = (; gap = 0.05, alpha = 0.8),\n    mapping = (; color = :coefname => \"Conditions\"),\n    axis = (; xlabel = \"Time [s]\"),\n)","category":"section"},{"location":"generated/tutorials/erp/#Error-ribbons","page":"ERP plot","title":"Error ribbons","text":"stderror::bool = false - add an error ribbon, with lower and upper limits based on the :stderror column.\n\nDisplay a colored band on the graph to indicate lower and higher estimates based on the standard error. For the generalizability of your results, it is always better to include error bands.\n\nf = Figure()\nresults.coefname =\n    replace(results.coefname, \"condition: face\" => \"face\", \"(Intercept)\" => \"car\")\nresults = filter(row -> row.coefname != \"continuous\", results)\nplot_erp!(\n    f[1, 1],\n    results;\n    axis = (title = \"Bad example\", titlegap = 12, xlabel = \"\"),\n    :stderror => false,\n    mapping = (; color = :coefname => \"Conditions\"),\n)\n\nplot_erp!(\n    f[2, 1],\n    results;\n    axis = (title = \"Good example\", titlegap = 12, xlabel = \"Time [s]\"),\n    :stderror => true,\n    mapping = (; color = :coefname => \"Conditions\"),\n)\n\nax = Axis(f[2, 1], width = Relative(1), height = Relative(1))\nxlims!(ax, [-0.04, 1])\nylims!(ax, [-0.04, 1])\nhidespines!(ax)\nhidedecorations!(ax)\ntext!(0.98, 0.2, text = \"* Confidence\\nintervals\", align = (:right, :top))\nf\n\nThere are two ways to implement it. First is using :stderror = true after ;.\n\nresults.se_low = results.estimate .- 0.5\nresults.se_high = results.estimate .+ 0.15\nplot_erp(\n    select(results, Not(:stderror));\n    stderror = true,\n    mapping = (; color = :coefname => \"Conditions\"),\n    axis = (; xlabel = \"Time [s]\"),\n)\n\nSecond way is to specify manually lower and higher borders of the error bands.\n\nnote: Note\n:stderror has precedence over :se_low/:se_high.","category":"section"},{"location":"generated/tutorials/erp/#Faceting","page":"ERP plot","title":"Faceting","text":"Creation of column facets for each channel.\n\nm7 = UnfoldMakie.example_data(\"7channels\")\nresults7 = coeftable(m7)\nplot_erp(\n    results7,\n    mapping = (; row = :coefname, col = :channel, color = :channel),\n    axis = (; xlabel = \"Time [s]\"),\n    nticks = (3, 4),\n)","category":"section"},{"location":"generated/tutorials/erp/#Configurations-of-ERP-plot","page":"ERP plot","title":"Configurations of ERP plot","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/erp/#UnfoldMakie.plot_erp","page":"ERP plot","title":"UnfoldMakie.plot_erp","text":"plot_erp!(f::Union{GridPosition, GridLayout, Figure}, plot_data::Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}}; kwargs...)\nplot_erp(times, plot_data::Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}}; kwargs...)\n\nPlot an ERP plot.   \n\nArguments\n\nf::Union{GridPosition, GridLayout, Figure}\n  Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{Union{DataFrame, AbstractMatrix, AbstractVector{<:Number}, Vector{Float32}}\n  Data for the ERP plot visualization.\nkwargs...\n  Additional styling behavior. \n  Often used as: plot_erp(df; mapping = (; color = :coefname, col = :conditionA)).\n\nKeyword arguments (kwargs)\n\nnticks::Union{Int,Tuple{Int,Int}, NamedTuple{(:x,:y),Tuple{Int,Int}}} = 5\n  Set the number of tick positions (x,y). Acepts 3 types fo arguments: 6 (=both axes are 6), (5,7), or (x=5, y=7).    Controls positions only (use xtickformat/ytickformat for labels).\nstderror::Bool = false\n  Add an error ribbon, with lower and upper limits based on the :stderror column.\nsignificance::DataFrame = nothing\n  Show significant time periods as horizontal bars.\n  Example: DataFrame(from = [0.1, 0.3], to = [0.5, 0.7], coefname = [\"(Intercept)\", \"condition: face\"]).\n  If coefname is not specified, the significance lines will be black.\nlayout.use_colorbar = true\n  Enable or disable colorbar.\n\nlayout.use_legend = true\n  Enable or disable legend.\n\nlayout.show_legend = true\n  Enable or disable legend and colorbar.\n\ntick_formatter::Function = default_ticks\n  Function used to compute automatic tick positions and labels for both axes.\n  Example: tick_formatter = v -> default_ticks(v; nticks = 6).\nmapping = (;)\n  Specify color, col (column), linestyle, group.\n  F.e. mapping = (; col = :group) will make a column for each group.\nvisual = (; color = Makie.wong_colors, colormap = :roma)\n  For categorical color use visual.color, for continuous - visual.colormap.\n\nsigifnicance_visual::Symbol = :vspan\n  How to display significance intervals. Options:\n  * :vspan ‚Äì draw vertical shaded spans (default);\n  * :lines ‚Äì draw horizontal bands below ERP lines;\n  * :both ‚Äì draw both.\n\nsignificance_lines::NamedTuple = (;)\n  Configure the appearance of significance lines:\n  * linewidth ‚Äì thickness of each line (not working);\n  * gap ‚Äì vertical space between stacked lines. Computed as stack_step = linewidth + gap;\n  * alpha ‚Äì transparency of the lines.\n  Defaults: (alpha = 1, linewidth = 0.005, gap = 0.1)\nsignificance_vspan::NamedTuple = (;)\n  Control appearance of vertical significance spans:\n  * alpha ‚Äì transparency of the shaded area.\n  Defaults: (alpha = 0.3,)\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Time [s]\", ylabel = \"Voltage [¬µV]\", yticklabelsize = 14, xtickformat = UnfoldMakie.var\"#PlotConfig##4#PlotConfig##5\"(), ytickformat = UnfoldMakie.var\"#PlotConfig##6#PlotConfig##7\"()) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true, use_legend = true, hidespines = (:r, :t), hidedecorations = Dict{Symbol, Bool}(:grid => 1, :label => 0, :ticks => 0, :ticklabels => 0)) - check this page \n\nmapping = (x = (:time,), y = (:estimate, :yhat, :y), color = (:color, :coefname, nothing)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = :roma, color = ColorTypes.RGBA{Float32}[RGBA(0.0, 0.44705883, 0.69803923, 1.0), RGBA(0.9019608, 0.62352943, 0.0, 1.0), RGBA(0.0, 0.61960787, 0.4509804, 1.0), RGBA(0.8, 0.4745098, 0.654902, 1.0), RGBA(0.3372549, 0.7058824, 0.9137255, 1.0), RGBA(0.8352941, 0.36862746, 0.0, 1.0), RGBA(0.9411765, 0.89411765, 0.25882354, 1.0)]) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, framevisible = false, position = :right) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966, label = \"\", flipaxis = true) - use kwargs... of  AlgebraOfGraphics.colorbar! \n\nReturn Value: Figure displaying the ERP plot.\n\n\n\n\n\n","category":"function"},{"location":"generated/tutorials/parallelcoordinates/#Parallel-Coordinates","page":"Parallel coordinates","title":"Parallel Coordinates","text":"Parallel Coordinates Plot (PCP) is a visualization technique used to represent EEG activity across multiple channels.\n\nTrial dimension: Each line corresponds to a single trial. Alternatively, trials can be averaged to reduce visual complexity.\nChannel dimension: Each vertical axis is a channel. Although all channels can be shown, typically only a selected subset is visualized to avoid clutter.\nCondition and time dimensions: These can be encoded using the color or style of the lines to distinguish between experimental conditions or time windows.\nVoltage (EEG amplitude): Represented along the y-axis of each vertical axis. The scale can either be fixed across all channels or adjusted per channel, depending on the analysis goal.","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Setup","page":"Parallel coordinates","title":"Setup","text":"Package loading\n\nusing Unfold\nusing UnfoldMakie\nusing DataFrames\nusing CairoMakie\n\nData generation\n\nr1, positions = UnfoldMakie.example_data();\nr2 = deepcopy(r1)\nr2.coefname .= \"B\" # create a second category\nr2.estimate .+= rand(length(r2.estimate)) * 0.1\nresults_plot = vcat(r1, r2);\nnothing #hide","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Plot-PCPs","page":"Parallel coordinates","title":"Plot PCPs","text":"plot_parallelcoordinates(\n    subset(results_plot, :channel => x -> x .<= 5);\n    mapping = (; color = :coefname),\n    ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\"],\n)","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Additional-features","page":"Parallel coordinates","title":"Additional features","text":"","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Normalization","page":"Parallel coordinates","title":"Normalization","text":"On the first image, there is no normalization and the extremes of all axes are the same and equal to the max and min values across all chanells. On the second image, there is a minmax normalization, so each axis has its own extremes based on the min and max of the data.\n\nTypically, parallel plots are normalized per axis. Whether this makes sense for estimating channel x, we do not know.\n\nbegin\n    f = Figure()\n    plot_parallelcoordinates(\n        f[1, 1],\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\", \"T7\", \"CP3\", \"P3\", \"P7\", \"O1\"],\n        subset(results_plot, :channel => x -> x .< 10);\n        mapping = (; color = :coefname),\n        axis = (; xlabel = \"\", title = \"normalize = nothing\"),\n    )\n    plot_parallelcoordinates(\n        f[2, 1],\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\", \"T7\", \"CP3\", \"P3\", \"P7\", \"O1\"],\n        subset(results_plot, :channel => x -> x .< 10);\n        mapping = (; color = :coefname),\n        normalize = :minmax,\n        axis = (; title = \"normalize = :minmax\"),\n    )\n    f\nend","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Color-schemes","page":"Parallel coordinates","title":"Color schemes","text":"Use only categorical with high contrast between adjacent colors. More: change colormap.\n\nbegin\n    f = Figure()\n    plot_parallelcoordinates(\n        f[1, 1],\n        ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\", \"Pz\"],\n        subset(results_plot, :channel => x -> x .<= 5);\n        mapping = (; color = :coefname),\n        visual = (; colormap = :tab10),\n        axis = (; xlabel = \"\", title = \"colormap = tab10\"),\n    )\n    plot_parallelcoordinates(\n        f[2, 1],\n        ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\", \"Pz\"],\n        subset(results_plot, :channel => x -> x .<= 5);\n        mapping = (; color = :coefname),\n        visual = (; colormap = :Accent_3),\n        axis = (; title = \"colormap = Accent_3\"),\n    )\n    f\nend","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Labels","page":"Parallel coordinates","title":"Labels","text":"Use ax_labels to specify labels for the axes.\n\nplot_parallelcoordinates(\n    subset(results_plot, :channel => x -> x .< 5);\n    visual = (; color = :steelblue1),\n    ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"],\n)","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Tick-labels","page":"Parallel coordinates","title":"Tick labels","text":"Specify tick labels on axis. There are four different options for the tick labels.\n\nbegin\n    f = Figure(size = (500, 900))\n    plot_parallelcoordinates(\n        f[1, 1],\n        subset(results_plot, :channel => x -> x .< 5, :time => x -> x .< 0);\n        ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"],\n        ax_ticklabels = :all,\n        normalize = :minmax,\n        visual = (; color = :burlywood1),\n        axis = (;\n            xlabel = \"\",\n            ylabelpadding = 40,\n            title = \"ax_ticklabels = :all\",\n        ),\n    ) # show all ticks on all axes\n    plot_parallelcoordinates(\n        f[2, 1],\n        subset(results_plot, :channel => x -> x .< 5, :time => x -> x .< 0);\n        ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"],\n        ax_ticklabels = :left,\n        normalize = :minmax,\n        visual = (; color = :cyan3),\n        axis = (;\n            xlabel = \"\",\n            ylabelpadding = 40,\n            title = \"ax_ticklabels = :left\",\n        ),\n    ) # show all ticks on the left axis, but only extremities on others\n    plot_parallelcoordinates(\n        f[3, 1],\n        subset(results_plot, :channel => x -> x .< 5, :time => x -> x .< 0);\n        ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"],\n        ax_ticklabels = :outmost,\n        normalize = :minmax,\n        visual = (; color = :burlywood1),\n        axis = (;\n            xlabel = \"\",\n            ylabelpadding = 40,\n            title = \"ax_ticklabels = :outmost\",\n        ),\n    ) # show ticks on extremities of all axes\n\n    plot_parallelcoordinates(\n        f[4, 1],\n        subset(results_plot, :channel => x -> x .< 5, :time => x -> x .< 0);\n        ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"],\n        ax_ticklabels = :none,\n        normalize = :minmax,\n        visual = (; color = :cyan3),\n        axis = (; ylabelpadding = 40, title = \"ax_ticklabels = :none\"),\n    ) #  disable all ticks\n    f\nend","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Bending-the-parallel-plot","page":"Parallel coordinates","title":"Bending the parallel plot","text":"Bending the linescan be helpful to make them more visible.\n\nbegin\n    f = Figure()\n    plot_parallelcoordinates(\n        f[1, 1],\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\", \"T7\", \"CP3\", \"P3\", \"P7\", \"O1\"],\n        subset(results_plot, :channel => x -> x .< 10),\n        visual = (; color = :plum),\n        axis = (; title = \"bend = false\", xlabel = \"\"),\n    )\n    plot_parallelcoordinates(\n        f[2, 1],\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\", \"T7\", \"CP3\", \"P3\", \"P7\", \"O1\"],\n        subset(results_plot, :channel => x -> x .< 10),\n        bend = true, # here\n        visual = (; color = :plum),\n        axis = (; title = \"bend = true\"),\n    )\n    f\nend","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Transparancy","page":"Parallel coordinates","title":"Transparancy","text":"uf_5chan = UnfoldMakie.example_data(\"UnfoldLinearModelMultiChannel\")\n\nbegin\n    f = Figure()\n    plot_parallelcoordinates(\n        f[1, 1],\n        uf_5chan;\n        mapping = (; color = :coefname),\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\"],\n        visual = (; alpha = 0.1),\n        axis = (;\n            title = \"alpha = 0.1\",\n            xlabel = \"\",\n            ylabelpadding = 20,\n        ),\n    )\n    plot_parallelcoordinates(\n        f[2, 1],\n        uf_5chan,\n        mapping = (; color = :coefname),\n        ax_labels = [\"FP1\", \"F3\", \"F7\", \"FC3\", \"C3\"],\n        visual = (; alpha = 0.9),\n        axis = (; title = \"alpha = 0.9\", ylabelpadding = 20),\n    )\n    f\nend","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#Configurations-of-Parallel-coordinates-plot","page":"Parallel coordinates","title":"Configurations of Parallel coordinates plot","text":"\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/parallelcoordinates/#UnfoldMakie.plot_parallelcoordinates","page":"Parallel coordinates","title":"UnfoldMakie.plot_parallelcoordinates","text":"plot_parallelcoordinates(data::Union{DataFrame, AbstractMatrix}; kwargs...)\nplot_parallelcoordinates!(f::Union{GridPosition, GridLayout, Figure}, data::Union{DataFrame, AbstractMatrix}; kwargs)\n\nPlot a PCP (parallel coordinates plot).\nDimensions: conditions, channels, time, trials. \n\nArguments:\n\nf::Union{GridPosition, GridLayout, Figure}   Figure, GridLayout, or GridPosition to draw the plot.\ndata::Union{DataFrame, AbstractMatrix}\n  Data for the plot visualization.\n\nKeyword arguments (kwargs)\n\nnormalize::Symbol = nothing\n  If :minmax, normalize each axis to their respective min-max range.\nax_labels::Vector{String} = nothing\n  Specify axis labels. \n  Should be a vector of labels with length equal to the number of unique mapping.x values.\n  Example: ax_labels = [\"Fz\", \"Cz\", \"O1\", \"O2\"].\nax_ticklabels::Symbol = :outmost\n  Specify tick labels on axis.\n:all - show all labels on all axes.\n:left - show all labels on the left axis, but only min and max on others. \n:outmost - show labels on min and max of all other axes. \n:none - remove all labels. \nbend::Bool = false\n  Change straight lines between the axes to curved (\"bent\") lines using spline interpolation.\n  Note: While this makes the plot look cool, it is not generally recommended to bent the lines, as interpretation   suffers, and the resulting visualizations can be potentially missleading.\nvisual.alpha::Number = 0.5\n  Change of line transparency.\n\nDefining the axes\n\nmapping.x = :channel, mapping.y = :estimate.\n  Overwrite what should be on the x and the y axes.\nmapping.color = :colorcolumn \n  Split conditions by color. The default color is :black.\n\nShared plot configuration options\n\nThe shared plot options can be used as follows: type = (; key = value, ...)).\nFor example, plot_x(...; colorbar = (; vertical = true, label = \"Test\")).\nMultiple defaults will be cycled until match.\n\nPlacing ; is important!\n\nfigure = NamedTuple() - use kwargs... of Makie.Figure \n\naxis = (xlabel = \"Channels\", ylabel = \"Voltage [¬µV]\", title = \"\", xlabelpadding = 14, ylabelpadding = 26) - use kwargs... of  Makie.Axis \n\nlayout = (show_legend = true, use_colorbar = true) - check this page \n\nmapping = (x = :channel, y = (:estimate, :yhat, :y)) - use any mapping from AlgebraOfGraphics \n\nvisual = (colormap = ColorTypes.RGBA{Float32}[RGBA(0.0, 0.44705883, 0.69803923, 1.0), RGBA(0.9019608, 0.62352943, 0.0, 1.0), RGBA(0.0, 0.61960787, 0.4509804, 1.0), RGBA(0.8, 0.4745098, 0.654902, 1.0), RGBA(0.3372549, 0.7058824, 0.9137255, 1.0), RGBA(0.8352941, 0.36862746, 0.0, 1.0), RGBA(0.9411765, 0.89411765, 0.25882354, 1.0)], color = :black, alpha = 0.3) - use kwargs... of Makie.lines \n\nlegend = (orientation = :vertical, tellwidth = true, tellheight = false, halign = :right, valign = :center, title = \"Conditions\", merge = true, framevisible = false) - use kwargs... of  Makie.Legend \n\ncolorbar = (vertical = true, tellwidth = true, tellheight = false, labelrotation = -1.5707963267948966) - use kwargs... of  Makie.Colorbar \n\nReturn Value: Figure displaying the Parallel coordinates plot.\n\n\n\n\n\n","category":"function"},{"location":"generated/explanations/speed/#Speed-measurement","page":"Benchmarks","title":"Speed measurement","text":"Here we will compare the speed of plotting UnfoldMakie with MNE (Python) and EEGLAB (MATLAB).\n\nThree cases are measured:\n\nSingle topoplot\nTopoplot series with 50 topoplots\nTopoplott animation with 50 timestamps\n\nNote that the results of benchmarking on your computer and on Github may differ.\n\nusing UnfoldMakie\nusing TopoPlots\nusing BenchmarkTools\nusing Observables\nusing CairoMakie\nusing PythonPlot;\nusing PyMNE;\nnothing #hide\n\nData input\n\ndat, positions = TopoPlots.example_data()\ndf = UnfoldMakie.eeg_array_to_dataframe(dat[:, :, 1], string.(1:length(positions)));\nnothing #hide","category":"section"},{"location":"generated/explanations/speed/#Topoplots","page":"Benchmarks","title":"Topoplots","text":"UnfoldMakie.jl\n\n@benchmark plot_topoplot(dat[:, 320, 1]; positions = positions)\n\nUnfoldMakie.jl with DelaunayMesh\n\n@benchmark plot_topoplot(\n    dat[:, 320, 1];\n    positions = positions,\n    topo_interpolation = (; interpolation = DelaunayMesh()),\n)\n\nMNE\n\nposmat = collect(reduce(hcat, [[p[1], p[2]] for p in positions])')\npypos = Py(posmat).to_numpy()\npydat = Py(dat[:, 320, 1])\n\n@benchmark begin\n    f = PythonPlot.figure()\n    PyMNE.viz.plot_topomap(\n        pydat,\n        pypos,\n        sphere = 1.1,\n        extrapolate = \"box\",\n        cmap = \"RdBu_r\",\n        sensors = false,\n        contours = 6,\n    )\n    f.show()\nend","category":"section"},{"location":"generated/explanations/speed/#Topoplot-series","page":"Benchmarks","title":"Topoplot series","text":"Note that UnfoldMakie and MNE have different defaults for displaying topoplot series. UnfoldMakie in plot_topoplot averages over time samples. MNE in plot_topopmap displays single samples without averaging.\n\nUnfoldMakie.jl\n\n@benchmark begin\n    plot_topoplotseries(\n        df;\n        bin_num = 50,\n        positions = positions,\n        axis = (; xlabel = \"Time windows [s]\"),\n    )\nend\n\nMNE\n\neasycap_montage = PyMNE.channels.make_standard_montage(\"standard_1020\")\nch_names = pyconvert(Vector{String}, easycap_montage.ch_names)[1:64]\ninfo = PyMNE.create_info(PyList(ch_names), ch_types = \"eeg\", sfreq = 1)\ninfo.set_montage(easycap_montage)\nsimulated_epochs = PyMNE.EvokedArray(Py(dat[:, :, 1]), info)\n\n@benchmark simulated_epochs.plot_topomap(1:50)\n\nMATLAB\n\nRunning MATLAB on a GitHub Action is not easy. So we benchmarked three consecutive executions (on a screenshot) on a server with an AMD EPYC 7452 32-core processor. Note that Github and the server we used for MATLAB benchmarking are two different computers, which can give different timing results.\n\n<img src=\"../../../assets/MATLAB_benchmarking.png\" align=\"middle\"/>","category":"section"},{"location":"generated/explanations/speed/#Animation","page":"Benchmarks","title":"Animation","text":"The main advantage of Julia is the speed with which the figures are updated.\n\ntimestamps = range(1, 50, step = 1)\nframerate = 50\n\nUnfoldMakie with .gif\n\n@benchmark begin\n    f = Makie.Figure()\n    dat_obs = Observable(dat[:, 1, 1])\n    plot_topoplot!(f[1, 1], dat_obs, positions = positions)\n    record(f, \"topoplot_animation_UM.gif\", timestamps; framerate = framerate) do t\n        dat_obs[] = @view(dat[:, t, 1])\n    end\nend\n\n(Image: )\n\nMNE with .gif\n\n@benchmark begin\n    fig, anim = simulated_epochs.animate_topomap(\n        times = Py(timestamps),\n        frame_rate = framerate,\n        blit = false,\n        image_interp = \"cubic\", # same as CloughTocher\n    )\n    anim.save(\"topomap_animation_mne.gif\", writer = \"ffmpeg\", fps = framerate)\nend\n\nNote, that due to some bugs in (probably) PythonCall topoplot is black and white.\n\n(Image: )\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"generated/tutorials/videos/#Overview-and-Demo-Video","page":"Videos","title":"Overview & Demo Video","text":"Here we will share some links telling more about UnfoldMakie.jl:\n\nFrom the presentation on JuliaCon 2025 in Paris:\n\n<div align=\"center\">\n<iframe width=\"560\" height=\"315\"\nsrc=\"https://www.youtube.com/embed/KMmZ9yR1v-k?si=BZ2U9ZEdQJzcGq4D\"\ntitle=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer;\nautoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;\nweb-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n</div>\n\nFrom the Unfold workshop 2025:\n\n<div align=\"center\">\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/srB5mDIDoMY?si=RT3PHxNoXSylslyf\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n</div>\n\n\n\nThis page was generated using Literate.jl.","category":"section"},{"location":"#UnfoldMakie.jl-Documentation","page":"Home","title":"UnfoldMakie.jl Documentation","text":"Welcome to UnfoldMakie.jl: a Julia package for visualizations of EEG/ERP data and Unfold.jl models. Check this YouTube video for overview:\n\n(Image: Watch the overview video)","category":"section"},{"location":"#Key-features","page":"Home","title":"Key features","text":"üéØ Focused: Specialized for (r)ERP visualization.\nüé® Customizable: Full control over colors, lines, layouts via Makie.jl flexibility.\n‚ö° Fast: Complex figures (e.g., 50 topoplots) generated ~20√ó faster than EEGLAB.\nüîÑ Interactive: Partial support for Observables.jl, enabling dynamic plots.\nüó∫Ô∏è Smart aesthetics: Scientific color maps by default (no misleading rainbows!).\nüìö Well-documented: Extensive examples and user guides.\n\nFor more highlights visit this page.","category":"section"},{"location":"#Installation","page":"Home","title":"Installation","text":"julia> using Pkg; Pkg.add(\"UnfoldMakie\")\n\nFor more detailed instructions please refer to Installing Julia & Unfold Packages.","category":"section"},{"location":"#Usage-example","page":"Home","title":"Usage example","text":"Start with ERP plot and topopplot series. \n\nusing UnfoldMakie, CairoMakie, Unfold\nresults = Unfold.coeftable(UnfoldMakie.example_data(\"UnfoldLinearModel\"))\nf = Figure(size=(500, 350))\nplot_erp!(f,\n    results,\n    mapping = (; row = :coefname, color = :coefname => \"Conditions\"),\n    axis = (; xlabel = \"Time [s]\"),\n    stderror = true,\n)\nf\n\nusing UnfoldMakie, CairoMakie\ndat, positions = UnfoldMakie.example_data()\nplot_topoplotseries(\n    dat; bin_num = 9, nrows = 3,\n    positions = positions,\n    visual = (; label_scatter = false, contours = false),\n    axis = (; xlabel = \"Time windows [s]\"),\n    topolabels_rounding = (; digits = 2),\n)","category":"section"},{"location":"#Where-to-start:-Learning-roadmap","page":"Home","title":"Where to start: Learning roadmap","text":"","category":"section"},{"location":"#1.-First-step","page":"Home","title":"1. First step","text":"üìå Goal: Check why we need multiple plot types for Event-related potentials and what kind of plot types exist.  üîó Plot types | Complex figures","category":"section"},{"location":"#2.-Intermediate-topics","page":"Home","title":"2. Intermediate topics","text":"üìå Goal: Check the most popular plots. üîó ERP plot | Topoplot","category":"section"},{"location":"#3.-Advanced-topics","page":"Home","title":"3. Advanced topics","text":"üìå Goal: Learn about advanced customization üîó Visualize uncertainty in topoplot series","category":"section"},{"location":"#Statement-of-need","page":"Home","title":"Statement of need","text":"UnfoldMakie.jl is a Julia package for visualization of electroencephalography (EEG) data, with a focus on event-related potentials (ERPs) and regression-ERPs (rERPs). UnfoldMakie.jl fills a gap as one of the only dedicated EEG visualization libraries and offers ease of use, customization, speed, and detailed documentation. It allows for both explorative analysis (zooming/panning) and export to publication-ready vector graphics. This is achieved via multiple backends of Makie.jl: vector graphics with CairoMakie.jl, GPU-accelerated interactive graphics with GLMakie.jl, and the browser-based WGLMakie.jl.\n\nIn an earlier study (Mikheev et al., 2024), we asked novice and expert practitioners for insights into their ERP visualization practices. The results of this survey were used to develop and improve UnfoldMakie.jl. Further, UnfoldMakie.jl is agnostic (independent) of any specific analysis framework, but it nicely accompanies the rERP analysis package Unfold.jl (Ehinger & Dimigen, 2019).\n\nThe target audience of this package is anyone working with EEG, MEG, ERP, iEEG or other time-series data.","category":"section"},{"location":"generated/how_to/positions/#Convert-electrode-positions-form-3D-to-2D","page":"Electrode positions from 3D to 2D","title":"Convert electrode positions form 3D to 2D","text":"Sometimes you have 3D montage but you need 2D montage. How to convert one to another? The function to_positions should help.\n\nusing UnfoldMakie\nusing CairoMakie\nusing TopoPlots\nusing PyMNE;\nnothing #hide","category":"section"},{"location":"generated/how_to/positions/#Get-positions-from-MNE","page":"Electrode positions from 3D to 2D","title":"Get positions from MNE","text":"Generate an MNE structure taken from mne documentation\n\nbiosemi_montage = PyMNE.channels.make_standard_montage(\"biosemi64\")\nn_channels = length(biosemi_montage.ch_names)\nfake_info =\n    PyMNE.create_info(ch_names = biosemi_montage.ch_names, sfreq = 250.0, ch_types = \"eeg\")\ndata = rand(n_channels, 1) * 1e-6\nfake_evoked = PyMNE.EvokedArray(data, fake_info)\nfake_evoked.set_montage(biosemi_montage)\n\npos = to_positions(fake_evoked)","category":"section"},{"location":"generated/how_to/positions/#Projecting-from-3D-montage-to-2D","page":"Electrode positions from 3D to 2D","title":"Projecting from 3D montage to 2D","text":"pos3d = hcat(values(pyconvert(Dict, biosemi_montage.get_positions()[\"ch_pos\"]))...)\n\npos2 = to_positions(pos3d)\n\nf = Figure(size = (600, 300))\nscatter(f[1, 1], pos3d[1:2, :], axis = (title = \"Dropping third dimension\",))\nscatter(f[1, 2], pos2, axis = (title = \"Projection form 3D to 2D\",))\nf\n\nAs you can see, the \"naive\" transformation of simply dropping the third dimension does not really work (left). Instead, we have to project the channels onto a sphere and unfold it (right).\n\n\n\nThis page was generated using Literate.jl.","category":"section"}]
}
